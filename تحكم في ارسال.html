
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>لوحة تحكم الاشتراكات والأكواد المتقدمة</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.rtl.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css" rel="stylesheet">
    <style>
        :root {
            --primary-color: #667eea;
            --primary-dark: #5a67d8;
            --secondary-color: #f093fb;
            --dark-color: #2d3748;
            --darker-color: #1a202c;
            --light-color: #f7fafc;
            --success-color: #48bb78;
            --info-color: #4299e1;
            --warning-color: #ed8936;
            --danger-color: #f56565;
            --purple-color: #805ad5;
            --pink-color: #d53f8c;
            --indigo-color: #5a67d8;
            --sidebar-width: 320px;
            --navbar-height: 75px;
            --shadow-light: 0 4px 20px rgba(0,0,0,0.08);
            --shadow-medium: 0 8px 30px rgba(0,0,0,0.12);
            --shadow-heavy: 0 15px 40px rgba(0,0,0,0.15);
            --border-radius: 18px;
            --transition-fast: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            --transition-slow: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            --glass-bg: rgba(255, 255, 255, 0.15);
            --glass-border: rgba(255, 255, 255, 0.2);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            overflow-x: hidden;
            height: 100%;
            font-family: 'Cairo', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            scroll-behavior: smooth;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 25%, #f093fb 50%, #667eea 75%, #764ba2 100%);
            background-size: 400% 400%;
            min-height: 100vh;
            padding-top: var(--navbar-height);
            position: relative;
            animation: gradientShift 15s ease infinite;
        }

        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 20% 80%, rgba(120, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(255, 119, 198, 0.3) 0%, transparent 50%),
                radial-gradient(circle at 40% 40%, rgba(120, 219, 255, 0.3) 0%, transparent 50%);
            z-index: -1;
            animation: backgroundMove 20s ease-in-out infinite;
        }

        @keyframes backgroundMove {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.8; transform: scale(1.05); }
        }

        /* الشريط العلوي المحسن */
        .navbar {
            position: fixed;
            top: 0;
            right: 0;
            left: 0;
            z-index: 1050;
            background: linear-gradient(135deg, var(--glass-bg) 0%, rgba(118, 75, 162, 0.25) 100%);
            backdrop-filter: blur(25px);
            border-bottom: 1px solid var(--glass-border);
            height: var(--navbar-height);
            box-shadow: var(--shadow-medium);
            padding: 0 2rem;
            border-radius: 0 0 var(--border-radius) var(--border-radius);
        }

        .navbar-brand {
            font-weight: 700;
            font-size: 1.6rem;
            color: white !important;
            text-shadow: 0 2px 15px rgba(0,0,0,0.3);
            transition: var(--transition-fast);
            position: relative;
            overflow: hidden;
        }

        .navbar-brand::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: var(--transition-fast);
        }

        .navbar-brand:hover::before {
            left: 100%;
        }

        .navbar-brand:hover {
            transform: scale(1.05);
            color: #f0f8ff !important;
        }

        .navbar-brand i {
            background: linear-gradient(45deg, #ffd700, #ffed4e);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-left: 10px;
            animation: sparkle 2s ease-in-out infinite;
        }

        @keyframes sparkle {
            0%, 100% { transform: scale(1) rotate(0deg); }
            50% { transform: scale(1.1) rotate(5deg); }
        }

        /* الشريط الجانبي المطور */
        .sidebar {
            background: linear-gradient(180deg, 
                var(--glass-bg) 0%, 
                rgba(26, 32, 44, 0.25) 100%);
            backdrop-filter: blur(25px);
            border-left: 1px solid var(--glass-border);
            border-radius: var(--border-radius) 0 0 var(--border-radius);
            color: white;
            height: calc(100vh - var(--navbar-height));
            position: fixed;
            top: var(--navbar-height);
            right: 0;
            width: var(--sidebar-width);
            padding: 2rem 0;
            overflow-y: auto;
            transition: var(--transition-slow);
            box-shadow: var(--shadow-heavy);
            z-index: 1040;
        }

        .sidebar::-webkit-scrollbar {
            width: 8px;
        }

        .sidebar::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }

        .sidebar::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, var(--primary-color), var(--secondary-color));
            border-radius: 10px;
            border: 2px solid rgba(255, 255, 255, 0.1);
        }

        .sidebar-header {
            text-align: center;
            margin-bottom: 2.5rem;
            padding: 0 1.5rem;
            position: relative;
        }

        .sidebar-header::after {
            content: '';
            position: absolute;
            bottom: -1rem;
            left: 50%;
            transform: translateX(-50%);
            width: 50px;
            height: 3px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            border-radius: 10px;
        }

        .sidebar-header h4 {
            background: linear-gradient(45deg, #667eea, #f093fb);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            font-weight: 700;
            font-size: 1.4rem;
            margin-bottom: 0.5rem;
        }

        .sidebar-header .subtitle {
            font-size: 0.9rem;
            color: rgba(255, 255, 255, 0.7);
            font-weight: 400;
        }

        .sidebar .nav-link {
            color: rgba(255, 255, 255, 0.8);
            transition: var(--transition-fast);
            padding: 1.2rem 1.5rem;
            font-weight: 500;
            border-right: 4px solid transparent;
            text-align: right;
            margin: 0.3rem 0;
            position: relative;
            overflow: hidden;
            border-radius: 0 var(--border-radius) var(--border-radius) 0;
        }

        .sidebar .nav-link::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 0;
            height: 100%;
            background: linear-gradient(90deg, rgba(102, 126, 234, 0.3), rgba(240, 147, 251, 0.3));
            transition: var(--transition-fast);
            z-index: -1;
        }

        .sidebar .nav-link::after {
            content: '';
            position: absolute;
            top: 50%;
            right: -50px;
            transform: translateY(-50%);
            width: 40px;
            height: 40px;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.1), transparent);
            border-radius: 50%;
            transition: var(--transition-fast);
            opacity: 0;
        }

        .sidebar .nav-link:hover::before,
        .sidebar .nav-link.active::before {
            width: 100%;
        }

        .sidebar .nav-link:hover::after,
        .sidebar .nav-link.active::after {
            right: 15px;
            opacity: 1;
        }

        .sidebar .nav-link:hover,
        .sidebar .nav-link.active {
            color: white;
            border-right-color: var(--secondary-color);
            transform: translateX(-8px);
            text-shadow: 0 2px 15px rgba(0,0,0,0.3);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.3);
        }

        .sidebar .nav-link i {
            margin-left: 15px;
            font-size: 1.2rem;
            transition: var(--transition-fast);
            width: 25px;
            text-align: center;
        }

        .sidebar .nav-link:hover i,
        .sidebar .nav-link.active i {
            transform: scale(1.2) rotate(5deg);
            filter: drop-shadow(0 0 10px rgba(255, 255, 255, 0.5));
        }

        /* المحتوى الرئيسي */
        .main-content {
            margin-right: var(--sidebar-width);
            margin-left: 0;
            padding: 2.5rem;
            min-height: calc(100vh - var(--navbar-height));
            transition: var(--transition-slow);
            position: relative;
        }

        .main-content::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--glass-bg);
            backdrop-filter: blur(15px);
            border-radius: var(--border-radius);
            z-index: -1;
            border: 1px solid var(--glass-border);
        }

        .section-title {
            font-size: 2.2rem;
            font-weight: 700;
            color: white;
            margin-bottom: 2.5rem;
            text-shadow: 0 3px 25px rgba(0,0,0,0.3);
            display: flex;
            align-items: center;
            gap: 1.5rem;
            position: relative;
        }

        .section-title::after {
            content: '';
            flex: 1;
            height: 3px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color), transparent);
            border-radius: 10px;
            margin-left: 2rem;
        }

        .section-title i {
            padding: 18px;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            border-radius: 50%;
            box-shadow: var(--shadow-medium);
            animation: iconPulse 3s ease-in-out infinite;
        }

        @keyframes iconPulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(102, 126, 234, 0.4); }
            50% { box-shadow: 0 0 0 20px rgba(102, 126, 234, 0); }
        }

        /* تصميم بطاقات الإحصائيات المطور */
        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2.5rem;
            margin-bottom: 3.5rem;
        }

        .stat-card {
            position: relative;
            background: var(--glass-bg);
            backdrop-filter: blur(25px);
            border: 1px solid var(--glass-border);
            border-radius: var(--border-radius);
            padding: 2.5rem;
            box-shadow: var(--shadow-light);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            cursor: default;
            transition: var(--transition-fast);
            overflow: hidden;
            min-height: 200px;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            transform: scaleX(0);
            transition: var(--transition-fast);
        }

        .stat-card::after {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: conic-gradient(from 0deg, transparent, rgba(255, 255, 255, 0.1), transparent);
            animation: cardShine 4s linear infinite;
            opacity: 0;
            transition: var(--transition-fast);
        }

        @keyframes cardShine {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .stat-card:hover {
            transform: translateY(-15px) scale(1.03);
            box-shadow: var(--shadow-heavy);
        }

        .stat-card:hover::before {
            transform: scaleX(1);
        }

        .stat-card:hover::after {
            opacity: 1;
        }

        .stat-card-icon {
            font-size: 3.5rem;
            margin-bottom: 1.5rem;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            transition: var(--transition-fast);
            position: relative;
        }

        .stat-card-icon::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80px;
            height: 80px;
            background: radial-gradient(circle, rgba(102, 126, 234, 0.1), transparent);
            border-radius: 50%;
            z-index: -1;
            transition: var(--transition-fast);
        }

        .stat-card:hover .stat-card-icon {
            transform: scale(1.15) rotate(10deg);
            filter: drop-shadow(0 0 20px rgba(102, 126, 234, 0.5));
        }

        .stat-card:hover .stat-card-icon::after {
            width: 120px;
            height: 120px;
            background: radial-gradient(circle, rgba(102, 126, 234, 0.2), transparent);
        }

        .stat-card h5 {
            font-weight: 600;
            font-size: 1.1rem;
            margin-bottom: 1rem;
            color: rgba(255, 255, 255, 0.9);
            text-shadow: 0 1px 10px rgba(0,0,0,0.3);
        }

        .stat-card h2 {
            font-size: 3rem;
            margin: 0;
            font-weight: 700;
            color: white;
            text-shadow: 0 2px 15px rgba(0,0,0,0.3);
            position: relative;
        }

        .stat-card .counter-animation {
            display: inline-block;
            animation: counterPop 0.5s ease-out;
        }

        @keyframes counterPop {
            0% { transform: scale(0.8); opacity: 0.5; }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); opacity: 1; }
        }

        /* ألوان متدرجة مختلفة لكل بطاقة */
        .stat-card:nth-child(1) .stat-card-icon { 
            background: linear-gradient(135deg, #667eea, #764ba2); 
            -webkit-background-clip: text; 
            -webkit-text-fill-color: transparent; 
        }
        .stat-card:nth-child(2) .stat-card-icon { 
            background: linear-gradient(135deg, #48bb78, #38a169); 
            -webkit-background-clip: text; 
            -webkit-text-fill-color: transparent; 
        }
        .stat-card:nth-child(3) .stat-card-icon { 
            background: linear-gradient(135deg, #4299e1, #3182ce); 
            -webkit-background-clip: text; 
            -webkit-text-fill-color: transparent; 
        }
        .stat-card:nth-child(4) .stat-card-icon { 
            background: linear-gradient(135deg, #805ad5, #6b46c1); 
            -webkit-background-clip: text; 
            -webkit-text-fill-color: transparent; 
        }
        .stat-card:nth-child(5) .stat-card-icon { 
            background: linear-gradient(135deg, #d53f8c, #b83280); 
            -webkit-background-clip: text; 
            -webkit-text-fill-color: transparent; 
        }
        .stat-card:nth-child(6) .stat-card-icon { 
            background: linear-gradient(135deg, #ed8936, #dd6b20); 
            -webkit-background-clip: text; 
            -webkit-text-fill-color: transparent; 
        }

        /* البطاقات العامة المطورة */
        .enhanced-card {
            background: var(--glass-bg);
            backdrop-filter: blur(25px);
            border: 1px solid var(--glass-border);
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-light);
            transition: var(--transition-fast);
            overflow: hidden;
            position: relative;
        }

        .enhanced-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, rgba(255, 255, 255, 0.05), transparent);
            pointer-events: none;
            transition: var(--transition-fast);
            opacity: 0;
        }

        .enhanced-card:hover {
            transform: translateY(-8px);
            box-shadow: var(--shadow-medium);
        }

        .enhanced-card:hover::before {
            opacity: 1;
        }

        .enhanced-card .card-header {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.8), rgba(118, 75, 162, 0.8));
            backdrop-filter: blur(20px);
            border: none;
            color: white;
            font-weight: 600;
            padding: 1.8rem;
            position: relative;
            overflow: hidden;
        }

        .enhanced-card .card-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
            transition: var(--transition-fast);
        }

        .enhanced-card:hover .card-header::before {
            left: 100%;
        }

        .enhanced-card .card-body {
            padding: 2.5rem;
            background: rgba(255, 255, 255, 0.02);
        }

        /* الجداول المحسنة */
        .table-container {
            border-radius: var(--border-radius);
            overflow: hidden;
            box-shadow: var(--shadow-light);
            position: relative;
        }

        .table-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--glass-bg);
            backdrop-filter: blur(15px);
            border: 1px solid var(--glass-border);
            border-radius: var(--border-radius);
            pointer-events: none;
        }

        .table {
            margin: 0;
            background: transparent;
            color: white;
            position: relative;
            z-index: 1;
        }

        .table thead th {
            background: linear-gradient(135deg, rgba(45, 55, 72, 0.9), rgba(26, 32, 44, 0.9));
            backdrop-filter: blur(20px);
            color: white;
            border: none;
            font-weight: 600;
            padding: 1.5rem;
            text-shadow: 0 1px 10px rgba(0,0,0,0.3);
            position: relative;
        }

        .table thead th::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 2px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
        }

        .table tbody td {
            padding: 1.5rem;
            border-color: rgba(255, 255, 255, 0.1);
            vertical-align: middle;
            background: rgba(255, 255, 255, 0.02);
            transition: var(--transition-fast);
        }

        .table tbody tr {
            transition: var(--transition-fast);
            position: relative;
        }

        .table tbody tr::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 0;
            background: linear-gradient(90deg, rgba(102, 126, 234, 0.1), rgba(240, 147, 251, 0.1));
            transition: var(--transition-fast);
        }

        .table tbody tr:hover {
            background-color: rgba(102, 126, 234, 0.1);
            transform: scale(1.01);
            box-shadow: 0 5px 20px rgba(102, 126, 234, 0.2);
        }

        .table tbody tr:hover::before {
            width: 5px;
        }

        /* الأزرار المحسنة */
        .btn-modern {
            border-radius: 15px;
            font-weight: 600;
            padding: 1rem 2rem;
            transition: var(--transition-fast);
            border: none;
            position: relative;
            overflow: hidden;
            text-transform: none;
            letter-spacing: 0.5px;
        }

        .btn-modern::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: var(--transition-fast);
        }

        .btn-modern::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: var(--transition-fast);
        }

        .btn-modern:hover::before {
            left: 100%;
        }

        .btn-modern:active::after {
            width: 300px;
            height: 300px;
        }

        .btn-primary-modern {
            background: linear-gradient(135deg, var(--primary-color), var(--primary-dark));
            color: white;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .btn-primary-modern:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
            color: white;
        }

        .btn-success-modern {
            background: linear-gradient(135deg, var(--success-color), #38a169);
            color: white;
            box-shadow: 0 5px 15px rgba(72, 187, 120, 0.3);
        }

        .btn-success-modern:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(72, 187, 120, 0.4);
            color: white;
        }

        .btn-warning-modern {
            background: linear-gradient(135deg, var(--warning-color), #dd6b20);
            color: white;
            box-shadow: 0 5px 15px rgba(237, 137, 54, 0.3);
        }

        .btn-warning-modern:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(237, 137, 54, 0.4);
            color: white;
        }

        .btn-danger-modern {
            background: linear-gradient(135deg, var(--danger-color), #e53e3e);
            color: white;
            box-shadow: 0 5px 15px rgba(245, 101, 101, 0.3);
        }

        .btn-danger-modern:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(245, 101, 101, 0.4);
            color: white;
        }

        .btn-info-modern {
            background: linear-gradient(135deg, var(--info-color), #3182ce);
            color: white;
            box-shadow: 0 5px 15px rgba(66, 153, 225, 0.3);
        }

        .btn-info-modern:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(66, 153, 225, 0.4);
            color: white;
        }

        /* النماذج المحسنة */
        .form-control, .form-select {
            border-radius: 12px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            padding: 1rem 1.5rem;
            transition: var(--transition-fast);
            background: var(--glass-bg);
            backdrop-filter: blur(15px);
            color: white;
            font-weight: 500;
        }

        .form-control::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }

        .form-control:focus, .form-select:focus {
            border-color: var(--primary-color);
            box-shadow: 0 0 0 0.25rem rgba(102, 126, 234, 0.25);
            background: rgba(255, 255, 255, 0.1);
            color: white;
        }

        .form-label {
            font-weight: 600;
            color: white;
            margin-bottom: 0.8rem;
            text-shadow: 0 1px 8px rgba(0,0,0,0.3);
            font-size: 1.05rem;
        }

        .form-label i {
            color: var(--secondary-color);
            margin-left: 8px;
            filter: drop-shadow(0 0 5px rgba(240, 147, 251, 0.5));
        }

        /* البطاقات المولدة */
        .generated-card {
            background: linear-gradient(135deg, rgba(72, 187, 120, 0.15), rgba(56, 161, 105, 0.15));
            backdrop-filter: blur(25px);
            border: 1px solid rgba(72, 187, 120, 0.3);
            border-radius: var(--border-radius);
            color: white;
            box-shadow: var(--shadow-medium);
            position: relative;
            overflow: hidden;
        }

        .generated-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 5px;
            background: linear-gradient(90deg, var(--success-color), #38a169);
            animation: progressBar 2s ease-out;
        }

        @keyframes progressBar {
            0% { transform: scaleX(0); }
            100% { transform: scaleX(1); }
        }

        .generated-card .card-header {
            background: rgba(72, 187, 120, 0.2);
            backdrop-filter: blur(20px);
            border: none;
        }

        .generated-card .card-body {
            background: rgba(255, 255, 255, 0.05);
        }

        /* الشارات المحسنة */
        .badge {
            border-radius: 10px;
            padding: 0.6rem 1.2rem;
            font-weight: 600;
            font-size: 0.85rem;
            letter-spacing: 0.3px;
            position: relative;
            overflow: hidden;
        }

        .badge::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: var(--transition-fast);
        }

        .badge:hover::before {
            left: 100%;
        }

        /* الإشعارات المطورة */
        .toast-container {
            position: fixed;
            top: calc(var(--navbar-height) + 1rem);
            left: 1rem;
            z-index: 12000;
        }

        .toast {
            border-radius: var(--border-radius);
            backdrop-filter: blur(25px);
            border: 1px solid var(--glass-border);
            box-shadow: var(--shadow-medium);
            min-width: 350px;
            position: relative;
            overflow: hidden;
        }

        .toast::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
        }

        /* أزرار التحكم المطورة */
        #sidebar-toggle, #theme-toggle-btn, #notifications-btn {
            border-radius: 12px;
            padding: 0.8rem 1.2rem;
            transition: var(--transition-fast);
            background: var(--glass-bg);
            backdrop-filter: blur(15px);
            border: 1px solid var(--glass-border);
            color: white;
            position: relative;
            overflow: hidden;
        }

        #sidebar-toggle::before, 
        #theme-toggle-btn::before, 
        #notifications-btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: var(--transition-fast);
        }

        #sidebar-toggle:hover::before, 
        #theme-toggle-btn:hover::before, 
        #notifications-btn:hover::before {
            left: 100%;
        }

        #sidebar-toggle:hover, 
        #theme-toggle-btn:hover, 
        #notifications-btn:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(255, 255, 255, 0.1);
        }

        #notifications-btn .badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background: linear-gradient(135deg, var(--danger-color), #e53e3e);
            animation: notificationPulse 2s infinite;
        }

        @keyframes notificationPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        /* حالات الشريط الجانبي */
        .sidebar-collapsed {
            right: calc(-1 * var(--sidebar-width));
        }

        .main-content-expanded {
            margin-right: 0;
        }

        /* الوضع الداكن المطور */
        .dark-mode {
            --glass-bg: rgba(26, 32, 44, 0.25);
            --glass-border: rgba(255, 255, 255, 0.1);
        }

        .dark-mode body {
            background: linear-gradient(135deg, #1a202c 0%, #2d3748 25%, #4a5568 50%, #1a202c 75%, #2d3748 100%);
        }

        .dark-mode .enhanced-card {
            background: rgba(26, 32, 44, 0.3);
            color: white;
        }

        .dark-mode .table {
            background: transparent;
            color: rgba(255, 255, 255, 0.9);
        }

        .dark-mode .form-control,
        .dark-mode .form-select {
            background: rgba(45, 55, 72, 0.3);
            color: white;
            border-color: rgba(255, 255, 255, 0.2);
        }

        .dark-mode .form-control:focus,
        .dark-mode .form-select:focus {
            background: rgba(45, 55, 72, 0.5);
            color: white;
        }

        /* تأثيرات التحميل المطورة */
        .loading-animation {
            position: relative;
            overflow: hidden;
        }

        .loading-animation::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 3px;
            background: linear-gradient(90deg, transparent, var(--primary-color), var(--secondary-color), transparent);
            animation: loading 2s infinite;
            border-radius: 10px;
        }

        @keyframes loading {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        .skeleton-loader {
            background: linear-gradient(90deg, rgba(255,255,255,0.1) 25%, rgba(255,255,255,0.2) 50%, rgba(255,255,255,0.1) 75%);
            background-size: 200% 100%;
            animation: skeletonLoading 1.5s infinite;
            border-radius: 8px;
        }

        @keyframes skeletonLoading {
            0% { background-position: 200% 0; }
            100% { background-position: -200% 0; }
        }

        /* تحسينات للأجهزة المحمولة */
        @media (max-width: 992px) {
            :root {
                --sidebar-width: 280px;
                --navbar-height: 65px;
            }

            .sidebar {
                right: calc(-1 * var(--sidebar-width));
                z-index: 1060;
                width: var(--sidebar-width);
            }
            
            .sidebar-show {
                right: 0;
                box-shadow: 0 0 50px rgba(0,0,0,0.5);
            }
            
            .main-content {
                margin-right: 0;
                padding: 1.5rem;
            }
            
            #sidebar-toggle {
                display: block !important;
            }

            .stats-container {
                grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
                gap: 1.5rem;
            }

            .stat-card {
                padding: 1.8rem;
                min-height: 160px;
            }

            .stat-card h2 {
                font-size: 2.2rem;
            }

            .section-title {
                font-size: 1.6rem;
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }

            .section-title::after {
                width: 100%;
                margin-left: 0;
            }

            .navbar {
                padding: 0 1rem;
            }

            .navbar-brand {
                font-size: 1.3rem;
            }

            .enhanced-card .card-body {
                padding: 1.5rem;
            }

            .form-control, .form-select {
                padding: 0.8rem 1rem;
            }

            .btn-modern {
                padding: 0.8rem 1.5rem;
                font-size: 0.9rem;
            }
        }

        @media (max-width: 576px) {
            .stats-container {
                grid-template-columns: 1fr;
                gap: 1rem;
            }

            .stat-card {
                padding: 1.5rem;
                min-height: 140px;
            }

            .main-content {
                padding: 1rem;
            }

            .section-title {
                font-size: 1.4rem;
            }

            .table-responsive {
                font-size: 0.85rem;
            }
        }

        @media (min-width: 992px) {
            #sidebar-toggle {
                display: none !important;
            }
        }

        /* تأثيرات إضافية متقدمة */
        .floating-element {
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            25% { transform: translateY(-8px) rotate(1deg); }
            50% { transform: translateY(-5px) rotate(0deg); }
            75% { transform: translateY(-12px) rotate(-1deg); }
        }

        .pulse-animation {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .rotate-animation {
            animation: rotate 20s linear infinite;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* شريط التقدم المطور */
        .progress {
            height: 12px;
            border-radius: 10px;
            background: rgba(255, 255, 255, 0.1);
            overflow: hidden;
            position: relative;
        }

        .progress::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, rgba(255,255,255,0.1) 25%, transparent 25%, transparent 50%, rgba(255,255,255,0.1) 50%, rgba(255,255,255,0.1) 75%, transparent 75%);
            background-size: 20px 20px;
            animation: progressStripe 1s linear infinite;
        }

        @keyframes progressStripe {
            0% { background-position: 0 0; }
            100% { background-position: 20px 0; }
        }

        .progress-bar {
            background: linear-gradient(90deg, var(--primary-color), var(--secondary-color));
            border-radius: 10px;
            transition: var(--transition-slow);
            position: relative;
            overflow: hidden;
        }

        .progress-bar::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: progressShine 2s infinite;
        }

        @keyframes progressShine {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        /* تأثيرات النقر المطورة */
        .click-effect {
            position: relative;
            overflow: hidden;
        }

        .click-effect::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            border-radius: 50%;
            background: radial-gradient(circle, rgba(255, 255, 255, 0.4), rgba(255, 255, 255, 0.1));
            transform: translate(-50%, -50%);
            transition: width 0.6s, height 0.6s;
            pointer-events: none;
        }

        .click-effect:active::after {
            width: 300px;
            height: 300px;
        }

        /* مؤشرات التحميل المتقدمة */
        .spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .dots-loader {
            display: inline-block;
            position: relative;
            width: 40px;
            height: 10px;
        }

        .dots-loader div {
            position: absolute;
            top: 0;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: white;
            animation: dotsLoader 1.2s linear infinite;
        }

        .dots-loader div:nth-child(1) { left: 0; animation-delay: -0.24s; }
        .dots-loader div:nth-child(2) { left: 16px; animation-delay: -0.12s; }
        .dots-loader div:nth-child(3) { left: 32px; animation-delay: 0s; }

        @keyframes dotsLoader {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1); }
        }

        /* تأثيرات الخلفية المتقدمة */
        .particle-bg {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -2;
        }

        .particle {
            position: absolute;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
            animation: particle-float 20s infinite linear;
        }

        @keyframes particle-float {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 1;
            }
            90% {
                opacity: 1;
            }
            100% {
                transform: translateY(-100px) rotate(360deg);
                opacity: 0;
            }
        }

        /* تحسينات الطباعة */
        @media print {
            .navbar, .sidebar, .toast-container {
                display: none !important;
            }

            .main-content {
                margin: 0 !important;
                padding: 1rem !important;
            }

            .enhanced-card {
                break-inside: avoid;
                box-shadow: none !important;
                border: 1px solid #ccc !important;
            }
        }

        /* تحسينات الأمان */
        .secure-input {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.2);
            position: relative;
        }

        .secure-input::before {
            content: '🔒';
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            opacity: 0.7;
        }

        /* المؤثرات الصوتية البصرية */
        .success-flash {
            animation: successFlash 0.5s ease-in-out;
        }

        @keyframes successFlash {
            0%, 100% { background: transparent; }
            50% { background: rgba(72, 187, 120, 0.2); }
        }

        .error-shake {
            animation: errorShake 0.5s ease-in-out;
        }

        @keyframes errorShake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        /* تحسينات إضافية للوصولية */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        .focus-visible:focus {
            outline: 2px solid var(--primary-color);
            outline-offset: 2px;
        }

        /* تأثيرات متقدمة للنصوص */
        .gradient-text {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .glowing-text {
            text-shadow: 0 0 10px var(--primary-color), 0 0 20px var(--primary-color), 0 0 30px var(--primary-color);
        }
    </style>
</head>
<body>

    <!-- خلفية الجسيمات -->
    <div class="particle-bg" id="particle-bg"></div>

    <!-- شريط علوي محسن -->
    <nav class="navbar navbar-expand-lg navbar-dark">
        <div class="d-flex align-items-center w-100">
            <button class="btn focus-visible" id="sidebar-toggle" aria-label="فتح/إغلاق القائمة الجانبية">
                <i class="fas fa-bars"></i>
            </button>
            <a class="navbar-brand floating-element" href="#" aria-label="الصفحة الرئيسية">
                <i class="fas fa-cogs rotate-animation"></i>لوحة التحكم المتقدمة
            </a>
            <div class="ms-auto d-flex gap-2">
                <button class="btn focus-visible" id="theme-toggle-btn" title="تبديل المظهر" aria-label="تبديل بين الوضع الفاتح والداكن">
                    <i class="fas fa-moon"></i>
                </button>
                <button class="btn focus-visible" id="notifications-btn" title="الإشعارات" aria-label="عرض الإشعارات">
                    <i class="fas fa-bell"></i>
                    <span class="badge bg-danger rounded-pill">3</span>
                </button>
                <button class="btn focus-visible" id="fullscreen-btn" title="ملء الشاشة" aria-label="تفعيل وضع ملء الشاشة">
                    <i class="fas fa-expand"></i>
                </button>
            </div>
        </div>
    </nav>

    <!-- إشعارات محسنة -->
    <div class="toast-container" id="toast-container" aria-live="polite" aria-atomic="true"></div>

    <!-- الشريط الجانبي المطور -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <h4 class="pulse-animation gradient-text">
                <i class="fas fa-chart-line"></i> لوحة الإحصائيات
            </h4>
            <p class="subtitle">نظام إدارة متقدم</p>
        </div>
        <ul class="nav flex-column">
            <li class="nav-item">
                <a class="nav-link active click-effect focus-visible" href="#dashboard-section" id="dashboard-tab" role="button" tabindex="0">
                    <i class="fas fa-chart-bar"></i> لوحة التحكم الرئيسية
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link click-effect focus-visible" href="#codes-section" id="codes-tab" role="button" tabindex="0">
                    <i class="fas fa-key"></i> إدارة أكواد التفعيل
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link click-effect focus-visible" href="#subscriptions-section" id="subscriptions-tab" role="button" tabindex="0">
                    <i class="fas fa-user-clock"></i> إدارة الاشتراكات
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link click-effect focus-visible" href="#create-code-section" id="create-code-tab" role="button" tabindex="0">
                    <i class="fas fa-plus-circle"></i> إنشاء كود جديد
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link click-effect focus-visible" href="#analytics-section" id="analytics-tab" role="button" tabindex="0">
                    <i class="fas fa-analytics"></i> التحليلات والتقارير
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link click-effect focus-visible" href="#users-section" id="users-tab" role="button" tabindex="0">
                    <i class="fas fa-users"></i> إدارة المستخدمين
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link click-effect focus-visible" href="#logs-section" id="logs-tab" role="button" tabindex="0">
                    <i class="fas fa-history"></i> سجل الأنشطة
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link click-effect focus-visible" href="#backup-section" id="backup-tab" role="button" tabindex="0">
                    <i class="fas fa-database"></i> النسخ الاحتياطي
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link click-effect focus-visible" href="#settings-section" id="settings-tab" role="button" tabindex="0">
                    <i class="fas fa-cog"></i> الإعدادات العامة
                </a>
            </li>
        </ul>
    </div>

    <!-- المحتوى الرئيسي -->
    <main class="main-content" id="main-content">

        <!-- قسم لوحة التحكم الرئيسية -->
        <section id="dashboard-section">
            <h3 class="section-title" data-aos="fade-down">
                <i class="fas fa-tachometer-alt"></i>لوحة التحكم الرئيسية
            </h3>
            
            <!-- بطاقات الإحصائيات المطورة -->
            <div class="stats-container">
                <div class="stat-card floating-element" data-aos="fade-up" data-aos-delay="100">
                    <i class="fas fa-users stat-card-icon"></i>
                    <h5>الاشتراكات النشطة</h5>
                    <h2 id="active-subs" class="counter-animation">0</h2>
                    <div class="progress mt-3">
                        <div class="progress-bar" style="width: 75%" role="progressbar" aria-valuenow="75" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                    <small class="text-light mt-2">+12% من الشهر الماضي</small>
                </div>
                
                <div class="stat-card floating-element" data-aos="fade-up" data-aos-delay="200">
                    <i class="fas fa-key stat-card-icon"></i>
                    <h5>أكواد التفعيل</h5>
                    <h2 id="total-codes" class="counter-animation">0</h2>
                    <div class="progress mt-3">
                        <div class="progress-bar" style="width: 85%" role="progressbar" aria-valuenow="85" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                    <small class="text-light mt-2">+8% من الشهر الماضي</small>
                </div>
                
                <div class="stat-card floating-element" data-aos="fade-up" data-aos-delay="300">
                    <i class="fas fa-check-circle stat-card-icon"></i>
                    <h5>أكواد مفعلة</h5>
                    <h2 id="active-codes" class="counter-animation">0</h2>
                    <div class="progress mt-3">
                        <div class="progress-bar" style="width: 60%" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                    <small class="text-light mt-2">+15% من الشهر الماضي</small>
                </div>
                
                <div class="stat-card floating-element" data-aos="fade-up" data-aos-delay="400">
                    <i class="fas fa-user-friends stat-card-icon"></i>
                    <h5>إجمالي المستخدمين</h5>
                    <h2 id="total-users" class="counter-animation">0</h2>
                    <div class="progress mt-3">
                        <div class="progress-bar" style="width: 90%" role="progressbar" aria-valuenow="90" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                    <small class="text-light mt-2">+25% من الشهر الماضي</small>
                </div>
                
                <div class="stat-card floating-element" data-aos="fade-up" data-aos-delay="500">
                    <i class="fas fa-user-check stat-card-icon"></i>
                    <h5>الحسابات النشطة</h5>
                    <h2 id="active-accounts" class="counter-animation">0</h2>
                    <div class="progress mt-3">
                        <div class="progress-bar" style="width: 70%" role="progressbar" aria-valuenow="70" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                    <small class="text-light mt-2">+5% من الشهر الماضي</small>
                </div>
                
                <div class="stat-card floating-element" data-aos="fade-up" data-aos-delay="600">
                    <i class="fas fa-chart-line stat-card-icon"></i>
                    <h5>عدد الجلسات</h5>
                    <h2 id="sessions" class="counter-animation">0</h2>
                    <div class="progress mt-3">
                        <div class="progress-bar" style="width: 95%" role="progressbar" aria-valuenow="95" aria-valuemin="0" aria-valuemax="100"></div>
                    </div>
                    <small class="text-light mt-2">+30% من الشهر الماضي</small>
                </div>
            </div>

            <!-- أنشطة حديثة -->
            <div class="row mt-5">
                <div class="col-md-8 mb-4">
                    <div class="enhanced-card" data-aos="fade-right">
                        <div class="card-header">
                            <h5><i class="fas fa-clock me-2"></i>الأنشطة الحديثة</h5>
                        </div>
                        <div class="card-body">
                            <div class="activity-timeline">
                                <div class="activity-item mb-3">
                                    <div class="d-flex align-items-center">
                                        <div class="activity-icon bg-success rounded-circle p-2 me-3">
                                            <i class="fas fa-user-plus text-white"></i>
                                        </div>
                                        <div class="flex-grow-1">
                                            <p class="mb-1">تم إنشاء مستخدم جديد</p>
                                            <small class="text-muted">قبل 5 دقائق</small>
                                        </div>
                                    </div>
                                </div>
                                <div class="activity-item mb-3">
                                    <div class="d-flex align-items-center">
                                        <div class="activity-icon bg-primary rounded-circle p-2 me-3">
                                            <i class="fas fa-key text-white"></i>
                                        </div>
                                        <div class="flex-grow-1">
                                            <p class="mb-1">تم تفعيل كود جديد</p>
                                            <small class="text-muted">قبل 15 دقيقة</small>
                                        </div>
                                    </div>
                                </div>
                                <div class="activity-item mb-3">
                                    <div class="d-flex align-items-center">
                                        <div class="activity-icon bg-warning rounded-circle p-2 me-3">
                                            <i class="fas fa-exclamation-triangle text-white"></i>
                                        </div>
                                        <div class="flex-grow-1">
                                            <p class="mb-1">انتهت صلاحية 3 أكواد</p>
                                            <small class="text-muted">قبل ساعة</small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-4 mb-4">
                    <div class="enhanced-card" data-aos="fade-left">
                        <div class="card-header">
                            <h5><i class="fas fa-tasks me-2"></i>المهام السريعة</h5>
                        </div>
                        <div class="card-body">
                            <div class="d-grid gap-3">
                                <button class="btn btn-primary-modern btn-modern" onclick="showSection('create-code-tab')">
                                    <i class="fas fa-plus me-2"></i>إنشاء كود جديد
                                </button>
                                <button class="btn btn-success-modern btn-modern" onclick="exportData()">
                                    <i class="fas fa-download me-2"></i>تصدير البيانات
                                </button>
                                <button class="btn btn-info-modern btn-modern" onclick="showSection('analytics-tab')">
                                    <i class="fas fa-chart-bar me-2"></i>عرض التقارير
                                </button>
                                <button class="btn btn-warning-modern btn-modern" onclick="showSection('backup-tab')">
                                    <i class="fas fa-database me-2"></i>نسخ احتياطي
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- الرسوم البيانية -->
            <div class="row mt-4">
                <div class="col-md-6 mb-4">
                    <div class="enhanced-card" data-aos="zoom-in">
                        <div class="card-header">
                            <h5><i class="fas fa-chart-area me-2"></i>نشاط المستخدمين</h5>
                        </div>
                        <div class="card-body">
                            <canvas id="userActivityChart" width="400" height="200"></canvas>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 mb-4">
                    <div class="enhanced-card" data-aos="zoom-in" data-aos-delay="100">
                        <div class="card-header">
                            <h5><i class="fas fa-pie-chart me-2"></i>توزيع الاشتراكات</h5>
                        </div>
                        <div class="card-body">
                            <canvas id="subscriptionChart" width="400" height="200"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- قسم إدارة الأكواد -->
        <section id="codes-section" style="display:none;">
            <h3 class="section-title" data-aos="fade-down">
                <i class="fas fa-key"></i>إدارة أكواد التفعيل
            </h3>
            
            <div class="enhanced-card" data-aos="fade-up">
                <div class="card-header">
                    <div class="d-flex justify-content-between align-items-center flex-wrap">
                        <h5><i class="fas fa-list me-2"></i>قائمة الأكواد</h5>
                        <div class="d-flex gap-2 flex-wrap">
                            <button class="btn btn-success-modern btn-modern" id="bulk-activate-codes">
                                <i class="fas fa-check-double me-2"></i>تفعيل متعدد
                            </button>
                            <button class="btn btn-info-modern btn-modern" id="export-codes">
                                <i class="fas fa-download me-2"></i>تصدير
                            </button>
                            <button class="btn btn-warning-modern btn-modern" id="refresh-codes">
                                <i class="fas fa-sync-alt me-2"></i>تحديث
                            </button>
                        </div>
                    </div>
                </div>
                <div class="card-body">
                    <!-- فلاتر البحث المطورة -->
                    <div class="row mb-4">
                        <div class="col-md-3 mb-3">
                            <label for="search-code" class="form-label">
                                <i class="fas fa-search"></i>البحث عن كود
                            </label>
                            <input type="text" class="form-control" id="search-code" placeholder="أدخل الكود أو جزء منه...">
                        </div>
                        <div class="col-md-3 mb-3">
                            <label for="filter-code-status" class="form-label">
                                <i class="fas fa-filter"></i>حالة الكود
                            </label>
                            <select class="form-select" id="filter-code-status">
                                <option value="">جميع الحالات</option>
                                <option value="active">مفعل</option>
                                <option value="inactive">غير مفعل</option>
                                <option value="expired">منتهي الصلاحية</option>
                            </select>
                        </div>
                        <div class="col-md-3 mb-3">
                            <label for="filter-code-type" class="form-label">
                                <i class="fas fa-tag"></i>نوع الكود
                            </label>
                            <select class="form-select" id="filter-code-type">
                                <option value="">جميع الأنواع</option>
                                <option value="premium">مميز</option>
                                <option value="standard">عادي</option>
                                <option value="trial">تجريبي</option>
                            </select>
                        </div>
                        <div class="col-md-3 mb-3">
                            <label for="sort-codes" class="form-label">
                                <i class="fas fa-sort"></i>ترتيب حسب
                            </label>
                            <select class="form-select" id="sort-codes">
                                <option value="date_desc">الأحدث أولاً</option>
                                <option value="date_asc">الأقدم أولاً</option>
                                <option value="duration_desc">أطول مدة</option>
                                <option value="duration_asc">أقصر مدة</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="table-container">
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th>
                                            <input type="checkbox" class="form-check-input" id="select-all-codes">
                                        </th>
                                        <th><i class="fas fa-hashtag me-1"></i>#</th>
                                        <th><i class="fas fa-barcode me-1"></i>الكود</th>
                                        <th><i class="fas fa-info-circle me-1"></i>الحالة</th>
                                        <th><i class="fas fa-clock me-1"></i>المدة</th>
                                        <th><i class="fas fa-tachometer-alt me-1"></i>السرعة</th>
                                        <th><i class="fas fa-calendar me-1"></i>تاريخ الإنشاء</th>
                                        <th><i class="fas fa-user me-1"></i>المستخدم</th>
                                        <th><i class="fas fa-cogs me-1"></i>الإجراءات</th>
                                    </tr>
                                </thead>
                                <tbody id="codes-table-body">
                                    <tr>
                                        <td><input type="checkbox" class="form-check-input code-checkbox"></td>
                                        <td>1</td>
                                        <td><code class="user-select-all">CODE-A1B2C3D4</code></td>
                                        <td><span class="badge bg-success">مفعل</span></td>
                                        <td>30 يوم</td>
                                        <td><span class="badge bg-primary">سريع</span></td>
                                        <td>2023-10-15 14:30</td>
                                        <td>Ahmed123</td>
                                        <td>
                                            <div class="btn-group" role="group">
                                                <button class="btn btn-sm btn-outline-info" title="عرض التفاصيل" onclick="viewCodeDetails(1)">
                                                    <i class="fas fa-eye"></i>
                                                </button>
                                                <button class="btn btn-sm btn-outline-warning" title="تعديل" onclick="editCode(1)">
                                                    <i class="fas fa-edit"></i>
                                                </button>
                                                <button class="btn btn-sm btn-outline-danger" title="حذف" onclick="deleteCode(1)">
                                                    <i class="fas fa-trash"></i>
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><input type="checkbox" class="form-check-input code-checkbox"></td>
                                        <td>2</td>
                                        <td><code class="user-select-all">CODE-E5F6G7H8</code></td>
                                        <td><span class="badge bg-warning text-dark">غير مفعل</span></td>
                                        <td>15 يوم</td>
                                        <td><span class="badge bg-secondary">متوسط</span></td>
                                        <td>2023-10-10 09:15</td>
                                        <td>غير مستخدم</td>
                                        <td>
                                            <div class="btn-group" role="group">
                                                <button class="btn btn-sm btn-outline-success" title="تفعيل" onclick="activateCode(2)">
                                                    <i class="fas fa-play"></i>
                                                </button>
                                                <button class="btn btn-sm btn-outline-warning" title="تعديل" onclick="editCode(2)">
                                                    <i class="fas fa-edit"></i>
                                                </button>
                                                <button class="btn btn-sm btn-outline-danger" title="حذف" onclick="deleteCode(2)">
                                                    <i class="fas fa-trash"></i>
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><input type="checkbox" class="form-check-input code-checkbox"></td>
                                        <td>3</td>
                                        <td><code class="user-select-all">CODE-I9J0K1L2</code></td>
                                        <td><span class="badge bg-danger">منتهي الصلاحية</span></td>
                                        <td>7 أيام</td>
                                        <td><span class="badge bg-info">بطيء</span></td>
                                        <td>2023-09-25 16:45</td>
                                        <td>Sara456</td>
                                        <td>
                                            <div class="btn-group" role="group">
                                                <button class="btn btn-sm btn-outline-primary" title="تجديد" onclick="renewCode(3)">
                                                    <i class="fas fa-redo"></i>
                                                </button>
                                                <button class="btn btn-sm btn-outline-warning" title="تعديل" onclick="editCode(3)">
                                                    <i class="fas fa-edit"></i>
                                                </button>
                                                <button class="btn btn-sm btn-outline-danger" title="حذف" onclick="deleteCode(3)">
                                                    <i class="fas fa-trash"></i>
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <!-- ترقيم الصفحات المطور -->
                    <nav aria-label="ترقيم الصفحات" class="mt-4">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <span class="text-light">عرض 1-10 من 150 نتيجة</span>
                            </div>
                            <ul class="pagination justify-content-center mb-0">
                                <li class="page-item disabled">
                                    <a class="page-link" href="#" tabindex="-1">السابق</a>
                                </li>
                                <li class="page-item active"><a class="page-link" href="#">1</a></li>
                                <li class="page-item"><a class="page-link" href="#">2</a></li>
                                <li class="page-item"><a class="page-link" href="#">3</a></li>
                                <li class="page-item"><a class="page-link" href="#">...</a></li>
                                <li class="page-item"><a class="page-link" href="#">15</a></li>
                                <li class="page-item">
                                    <a class="page-link" href="#">التالي</a>
                                </li>
                            </ul>
                        </div>
                    </nav>
                </div>
            </div>
        </section>

        <!-- قسم إدارة الاشتراكات -->
        <section id="subscriptions-section" style="display:none;">
            <h3 class="section-title" data-aos="fade-down">
                <i class="fas fa-user-clock"></i>إدارة الاشتراكات
            </h3>
            
            <div class="enhanced-card" data-aos="fade-up">
                <div class="card-header">
                    <div class="d-flex justify-content-between align-items-center flex-wrap">
                        <h5><i class="fas fa-users me-2"></i>قائمة الاشتراكات</h5>
                        <div class="d-flex gap-2 flex-wrap">
                            <button class="btn btn-success-modern btn-modern" id="bulk-extend-subscriptions">
                                <i class="fas fa-clock me-2"></i>تمديد متعدد
                            </button>
                            <button class="btn btn-info-modern btn-modern" id="export-subscriptions">
                                <i class="fas fa-download me-2"></i>تصدير
                            </button>
                            <button class="btn btn-warning-modern btn-modern" id="refresh-subscriptions">
                                <i class="fas fa-sync-alt me-2"></i>تحديث
                            </button>
                            <button class="btn btn-primary-modern btn-modern" id="add-subscription">
                                <i class="fas fa-plus me-2"></i>اشتراك جديد
                            </button>
                        </div>
                    </div>
                </div>
                <div class="card-body">
                    <!-- فلاتر البحث -->
                    <div class="row mb-4">
                        <div class="col-md-3 mb-3">
                            <label for="search-user" class="form-label">
                                <i class="fas fa-search"></i>البحث عن مستخدم
                            </label>
                            <input type="text" class="form-control" id="search-user" placeholder="اسم المستخدم...">
                        </div>
                        <div class="col-md-3 mb-3">
                            <label for="filter-status" class="form-label">
                                <i class="fas fa-filter"></i>حالة الاشتراك
                            </label>
                            <select class="form-select" id="filter-status">
                                <option value="">جميع الحالات</option>
                                <option value="active">نشط</option>
                                <option value="expired">منتهي</option>
                                <option value="suspended">معلق</option>
                                <option value="trial">تجريبي</option>
                            </select>
                        </div>
                        <div class="col-md-3 mb-3">
                            <label for="filter-expiry" class="form-label">
                                <i class="fas fa-calendar"></i>انتهاء الصلاحية
                            </label>
                            <select class="form-select" id="filter-expiry">
                                <option value="">جميع الفترات</option>
                                <option value="today">اليوم</option>
                                <option value="week">هذا الأسبوع</option>
                                <option value="month">هذا الشهر</option>
                                <option value="expired">منتهي</option>
                            </select>
                        </div>
                        <div class="col-md-3 mb-3">
                            <label for="sort-by" class="form-label">
                                <i class="fas fa-sort"></i>ترتيب حسب
                            </label>
                            <select class="form-select" id="sort-by">
                                <option value="expiry_asc">الأقرب انتهاءً</option>
                                <option value="date_desc">الأحدث</option>
                                <option value="user_asc">اسم المستخدم</option>
                                <option value="duration_desc">أطول مدة</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="table-container">
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th>
                                            <input type="checkbox" class="form-check-input" id="select-all-subscriptions">
                                        </th>
                                        <th><i class="fas fa-hashtag me-1"></i>#</th>
                                        <th><i class="fas fa-user me-1"></i>المستخدم</th>
                                        <th><i class="fas fa-info-circle me-1"></i>الحالة</th>
                                        <th><i class="fas fa-calendar-plus me-1"></i>تاريخ البدء</th>
                                        <th><i class="fas fa-calendar-times me-1"></i>تاريخ الانتهاء</th>
                                        <th><i class="fas fa-hourglass-half me-1"></i>الأيام المتبقية</th>
                                        <th><i class="fas fa-key me-1"></i>الكود المستخدم</th>
                                        <th><i class="fas fa-cogs me-1"></i>الإجراءات</th>
                                    </tr>
                                </thead>
                                <tbody id="subscriptions-table-body">
                                    <tr>
                                        <td><input type="checkbox" class="form-check-input subscription-checkbox"></td>
                                        <td>1</td>
                                        <td>
                                            <div class="d-flex align-items-center">
                                                <div class="avatar-circle me-2 bg-primary">
                                                    <span>أ</span>
                                                </div>
                                                <div>
                                                    <span class="fw-bold">أحمد محمد</span>
                                                    <br><small class="text-muted">ahmed@example.com</small>
                                                </div>
                                            </div>
                                        </td>
                                        <td><span class="badge bg-success">نشط</span></td>
                                        <td>2023-10-01</td>
                                        <td>2023-10-31</td>
                                        <td>
                                            <span class="badge bg-info">10 أيام</span>
                                        </td>
                                        <td><code class="user-select-all">CODE-A1B2C3D4</code></td>
                                        <td>
                                            <div class="btn-group" role="group">
                                                <button class="btn btn-sm btn-outline-info" title="عرض التفاصيل" onclick="viewSubscriptionDetails(1)">
                                                    <i class="fas fa-eye"></i>
                                                </button>
                                                <button class="btn btn-sm btn-outline-primary" title="تمديد الاشتراك" onclick="extendSubscription(1)">
                                                    <i class="fas fa-plus"></i>
                                                </button>
                                                <button class="btn btn-sm btn-outline-warning" title="تعليق" onclick="suspendSubscription(1)">
                                                    <i class="fas fa-pause"></i>
                                                </button>
                                                <button class="btn btn-sm btn-outline-danger" title="إلغاء الاشتراك" onclick="cancelSubscription(1)">
                                                    <i class="fas fa-ban"></i>
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><input type="checkbox" class="form-check-input subscription-checkbox"></td>
                                        <td>2</td>
                                        <td>
                                            <div class="d-flex align-items-center">
                                                <div class="avatar-circle me-2 bg-warning">
                                                    <span>س</span>
                                                </div>
                                                <div>
                                                    <span class="fw-bold">سارة أحمد</span>
                                                    <br><small class="text-muted">sara@example.com</small>
                                                </div>
                                            </div>
                                        </td>
                                        <td><span class="badge bg-danger">منتهي</span></td>
                                        <td>2023-09-01</td>
                                        <td>2023-09-30</td>
                                        <td>
                                            <span class="badge bg-danger">منتهي</span>
                                        </td>
                                        <td><code class="user-select-all">CODE-I9J0K1L2</code></td>
                                        <td>
                                            <div class="btn-group" role="group">
                                                <button class="btn btn-sm btn-outline-success" title="تجديد الاشتراك" onclick="renewSubscription(2)">
                                                    <i class="fas fa-redo"></i>
                                                </button>
                                                <button class="btn btn-sm btn-outline-info" title="إرسال تذكير" onclick="sendReminder(2)">
                                                    <i class="fas fa-envelope"></i>
                                                </button>
                                                <button class="btn btn-sm btn-outline-primary" title="إنشاء كود جديد" onclick="createNewCodeForUser(2)">
                                                    <i class="fas fa-key"></i>
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td><input type="checkbox" class="form-check-input subscription-checkbox"></td>
                                        <td>3</td>
                                        <td>
                                            <div class="d-flex align-items-center">
                                                <div class="avatar-circle me-2 bg-info">
                                                    <span>م</span>
                                                </div>
                                                <div>
                                                    <span class="fw-bold">محمد علي</span>
                                                    <br><small class="text-muted">mohammed@example.com</small>
                                                </div>
                                            </div>
                                        </td>
                                        <td><span class="badge bg-warning text-dark">معلق</span></td>
                                        <td>2023-10-05</td>
                                        <td>2023-11-05</td>
                                        <td>
                                            <span class="badge bg-warning">معلق</span>
                                        </td>
                                        <td><code class="user-select-all">CODE-M3N4O5P6</code></td>
                                        <td>
                                            <div class="btn-group" role="group">
                                                <button class="btn btn-sm btn-outline-success" title="إعادة تفعيل" onclick="reactivateSubscription(3)">
                                                    <i class="fas fa-play"></i>
                                                </button>
                                                <button class="btn btn-sm btn-outline-info" title="عرض سبب التعليق" onclick="viewSuspensionReason(3)">
                                                    <i class="fas fa-question-circle"></i>
                                                </button>
                                                <button class="btn btn-sm btn-outline-danger" title="إلغاء نهائي" onclick="permanentCancel(3)">
                                                    <i class="fas fa-times"></i>
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    
                    <!-- ترقيم الصفحات -->
                    <nav aria-label="ترقيم الصفحات" class="mt-4">
                        <div class="d-flex justify-content-between align-items-center">
                            <div>
                                <span class="text-light">عرض 1-10 من 200 نتيجة</span>
                            </div>
                            <ul class="pagination justify-content-center mb-0">
                                <li class="page-item disabled">
                                    <a class="page-link" href="#" tabindex="-1">السابق</a>
                                </li>
                                <li class="page-item active"><a class="page-link" href="#">1</a></li>
                                <li class="page-item"><a class="page-link" href="#">2</a></li>
                                <li class="page-item"><a class="page-link" href="#">3</a></li>
                                <li class="page-item"><a class="page-link" href="#">...</a></li>
                                <li class="page-item"><a class="page-link" href="#">20</a></li>
                                <li class="page-item">
                                    <a class="page-link" href="#">التالي</a>
                                </li>
                            </ul>
                        </div>
                    </nav>
                </div>
            </div>
        </section>

        <!-- قسم إنشاء كود جديد -->
        <section id="create-code-section" style="display:none;">
            <h3 class="section-title" data-aos="fade-down">
                <i class="fas fa-plus-circle"></i>إنشاء كود تفعيل جديد
            </h3>
            
            <div class="row">
                <div class="col-lg-8">
                    <div class="enhanced-card" data-aos="fade-right">
                        <div class="card-header">
                            <h5><i class="fas fa-magic me-2"></i>معالج إنشاء الكود المتقدم</h5>
                        </div>
                        <div class="card-body">
                            <form id="create-code-form" class="needs-validation" novalidate>
                                <div class="row">
                                    <div class="col-md-6 mb-4">
                                        <label for="duration" class="form-label">
                                            <i class="fas fa-calendar-alt"></i>مدة الاشتراك (أيام)
                                        </label>
                                        <input type="number" class="form-control" id="duration" required min="1" max="365" placeholder="أدخل مدة الاشتراك بالأيام" />
                                        <div class="invalid-feedback">يرجى إدخال مدة صحيحة (1-365 يوم)</div>
                                        <small class="form-text text-light">الحد الأقصى: 365 يوم</small>
                                    </div>
                                    
                                    <div class="col-md-6 mb-4">
                                        <label for="speed" class="form-label">
                                            <i class="fas fa-tachometer-alt"></i>سرعة التجميع
                                        </label>
                                        <select id="speed" class="form-select" required>
                                            <option value="" selected disabled>اختر السرعة</option>
                                            <option value="5000">بطيء (5 ثواني) - موفر للموارد</option>
                                            <option value="3000">متوسط (3 ثواني) - متوازن</option>
                                            <option value="1000">سريع (1 ثانية) - استهلاك عادي</option>
                                            <option value="500">سريع جداً (0.5 ثانية) - عالي الأداء</option>
                                        </select>
                                        <div class="invalid-feedback">يرجى اختيار سرعة</div>
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-6 mb-4">
                                        <label for="code-type" class="form-label">
                                            <i class="fas fa-tags"></i>نوع الكود
                                        </label>
                                        <select id="code-type" class="form-select">
                                            <option value="standard">عادي (ميزات أساسية)</option>
                                            <option value="premium">مميز (جميع الميزات)</option>
                                            <option value="trial">تجريبي (فترة محدودة)</option>
                                            <option value="vip">VIP (ميزات حصرية)</option>
                                        </select>
                                    </div>
                                    
                                    <div class="col-md-6 mb-4">
                                        <label for="max-uses" class="form-label">
                                            <i class="fas fa-users"></i>الحد الأقصى للاستخدامات
                                        </label>
                                        <input type="number" class="form-control" id="max-uses" min="0" max="100" value="1" placeholder="0 = غير محدود" />
                                        <small class="form-text text-light">0 يعني غير محدود، الحد الأقصى: 100</small>
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-6 mb-4">
                                        <label for="assigned-user" class="form-label">
                                            <i class="fas fa-user"></i>تخصيص لمستخدم (اختياري)
                                        </label>
                                        <input type="text" class="form-control" id="assigned-user" placeholder="اسم المستخدم أو البريد الإلكتروني..." />
                                        <small class="form-text text-light">اتركه فارغاً للاستخدام العام</small>
                                    </div>
                                    
                                    <div class="col-md-6 mb-4">
                                        <label for="expiry-date" class="form-label">
                                            <i class="fas fa-calendar-times"></i>تاريخ انتهاء صلاحية الكود
                                        </label>
                                        <input type="date" class="form-control" id="expiry-date" />
                                        <small class="form-text text-light">اتركه فارغاً لعدم وضع حد زمني</small>
                                    </div>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-6 mb-4">
                                        <label for="server-location" class="form-label">
                                            <i class="fas fa-server"></i>موقع الخادم
                                        </label>
                                        <select id="server-location" class="form-select">
                                            <option value="auto">تلقائي (الأفضل)</option>
                                            <option value="us">الولايات المتحدة</option>
                                            <option value="eu">أوروبا</option>
                                            <option value="asia">آسيا</option>
                                            <option value="me">الشرق الأوسط</option>
                                        </select>
                                    </div>
                                    
                                    <div class="col-md-6 mb-4">
                                        <label for="priority-level" class="form-label">
                                            <i class="fas fa-sort-amount-up"></i>مستوى الأولوية
                                        </label>
                                        <select id="priority-level" class="form-select">
                                            <option value="normal">عادي</option>
                                            <option value="high">عالي</option>
                                            <option value="urgent">عاجل</option>
                                            <option value="critical">حرج</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div class="mb-4">
                                    <label for="code-notes" class="form-label">
                                        <i class="fas fa-sticky-note"></i>ملاحظات وتعليمات إضافية
                                    </label>
                                    <textarea class="form-control" id="code-notes" rows="4" placeholder="أضف أي ملاحظات أو تعليمات خاصة للمستخدم..."></textarea>
                                </div>
                                
                                <!-- خيارات متقدمة -->
                                <div class="mb-4">
                                    <h6 class="text-light mb-3"><i class="fas fa-cogs me-2"></i>خيارات متقدمة</h6>
                                    <div class="row">
                                        <div class="col-md-4">
                                            <div class="form-check form-switch">
                                                <input class="form-check-input" type="checkbox" id="auto-renewal">
                                                <label class="form-check-label text-light" for="auto-renewal">
                                                    تجديد تلقائي
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-check form-switch">
                                                <input class="form-check-input" type="checkbox" id="email-notifications" checked>
                                                <label class="form-check-label text-light" for="email-notifications">
                                                    إشعارات بريدية
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-md-4">
                                            <div class="form-check form-switch">
                                                <input class="form-check-input" type="checkbox" id="analytics-tracking" checked>
                                                <label class="form-check-label text-light" for="analytics-tracking">
                                                    تتبع الاستخدام
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="d-flex gap-3 flex-wrap">
                                    <button type="submit" class="btn btn-primary-modern btn-modern">
                                        <i class="fas fa-plus me-2"></i> إنشاء الكود
                                    </button>
                                    <button type="button" class="btn btn-secondary btn-modern" id="reset-form">
                                        <i class="fas fa-undo me-2"></i> إعادة تعيين
                                    </button>
                                    <button type="button" class="btn btn-info-modern btn-modern" id="preview-code">
                                        <i class="fas fa-eye me-2"></i> معاينة
                                    </button>
                                    <button type="button" class="btn btn-warning-modern btn-modern" id="save-template">
                                        <i class="fas fa-save me-2"></i> حفظ كقالب
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
                
                <div class="col-lg-4">
                    <!-- معلومات مفيدة -->
                    <div class="enhanced-card mb-4" data-aos="fade-left">
                        <div class="card-header">
                            <h5><i class="fas fa-info-circle me-2"></i>معلومات مفيدة</h5>
                        </div>
                        <div class="card-body">
                            <div class="alert alert-info">
                                <h6><i class="fas fa-lightbulb me-2"></i>نصائح هامة:</h6>
                                <ul class="mb-0">
                                    <li>السرعة البطيئة تقلل استهلاك الموارد</li>
                                    <li>الأكواد المميزة تحصل على أولوية أعلى</li>
                                    <li>يمكن تعديل الأكواد بعد إنشائها</li>
                                    <li>استخدم التجديد التلقائي للعملاء المميزين</li>
                                </ul>
                            </div>
                            
                            <div class="alert alert-warning">
                                <h6><i class="fas fa-exclamation-triangle me-2"></i>تحذيرات:</h6>
                                <ul class="mb-0">
                                    <li>لا يمكن استرداد الأكواد المحذوفة</li>
                                    <li>تأكد من صحة البيانات قبل الإنشاء</li>
                                    <li>الأكواد المنتهية لا يمكن استخدامها</li>
                                </ul>
                            </div>
                            
                            <div class="alert alert-success">
                                <h6><i class="fas fa-check me-2"></i>أفضل الممارسات:</h6>
                                <ul class="mb-0">
                                    <li>استخدم أسماء مستخدمين واضحة</li>
                                    <li>أضف ملاحظات توضيحية</li>
                                    <li>راجع التقارير بانتظام</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <!-- قوالب سريعة -->
                    <div class="enhanced-card" data-aos="fade-left" data-aos-delay="100">
                        <div class="card-header">
                            <h5><i class="fas fa-bolt me-2"></i>قوالب سريعة</h5>
                        </div>
                        <div class="card-body">
                            <div class="d-grid gap-2">
                                <button class="btn btn-outline-primary btn-modern" onclick="loadTemplate('trial')">
                                    <i class="fas fa-rocket me-2"></i>تجريبي (7 أيام)
                                </button>
                                <button class="btn btn-outline-success btn-modern" onclick="loadTemplate('monthly')">
                                    <i class="fas fa-calendar me-2"></i>شهري (30 يوم)
                                </button>
                                <button class="btn btn-outline-warning btn-modern" onclick="loadTemplate('premium')">
                                    <i class="fas fa-crown me-2"></i>مميز (90 يوم)
                                </button>
                                <button class="btn btn-outline-info btn-modern" onclick="loadTemplate('annual')">
                                    <i class="fas fa-gem me-2"></i>سنوي (365 يوم)
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- بطاقة الكود المولد -->
            <div class="enhanced-card generated-card mt-4" id="generated-code-card" style="display: none;" data-aos="zoom-in">
                <div class="card-header">
                    <h5><i class="fas fa-check-circle me-2"></i>تم إنشاء الكود بنجاح!</h5>
                </div>
                <div class="card-body">
                    <div class="input-group mb-3">
                        <input type="text" class="form-control" id="generated-code" readonly />
                        <button class="btn btn-light" type="button" id="copy-code-btn">
                            <i class="fas fa-copy me-2"></i> نسخ
                        </button>
                        <button class="btn btn-light" type="button" id="share-code-btn">
                            <i class="fas fa-share-alt me-2"></i> مشاركة
                        </button>
                        <button class="btn btn-light" type="button" id="qr-code-btn">
                            <i class="fas fa-qrcode me-2"></i> QR Code
                        </button>
                    </div>
                    
                    <div class="alert alert-success">
                        <i class="fas fa-info-circle me-2"></i>
                        تم حفظ الكود تلقائياً في قاعدة البيانات وإرسال إشعار للمستخدم المحدد.
                    </div>
                    
                    <div class="row">
                        <div class="col-md-4">
                            <small class="text-muted">معرف الكود:</small>
                            <p id="code-id">-</p>
                        </div>
                        <div class="col-md-4">
                            <small class="text-muted">تاريخ الإنشاء:</small>
                            <p id="code-created">-</p>
                        </div>
                        <div class="col-md-4">
                            <small class="text-muted">حالة الكود:</small>
                            <p><span class="badge bg-success">جاهز للاستخدام</span></p>
                        </div>
                    </div>
                    
                    <!-- QR Code Container -->
                    <div id="qr-code-container" class="text-center mt-3" style="display: none;">
                        <canvas id="qr-code-canvas"></canvas>
                        <p class="mt-2 text-muted">يمكن مسح هذا الرمز لاستخدام الكود</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- قسم التحليلات -->
        <section id="analytics-section" style="display:none;">
            <h3 class="section-title" data-aos="fade-down">
                <i class="fas fa-analytics"></i>التحليلات والتقارير المتقدمة
            </h3>
            
            <!-- مؤشرات أداء رئيسية -->
            <div class="row mb-4">
                <div class="col-md-3 mb-3">
                    <div class="enhanced-card text-center" data-aos="fade-up">
                        <div class="card-body">
                            <i class="fas fa-chart-line display-4 text-primary mb-3"></i>
                            <h3 class="text-primary">87.5%</h3>
                            <p class="mb-0">معدل نجاح التفعيل</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3 mb-3">
                    <div class="enhanced-card text-center" data-aos="fade-up" data-aos-delay="100">
                        <div class="card-body">
                            <i class="fas fa-users display-4 text-success mb-3"></i>
                            <h3 class="text-success">1,234</h3>
                            <p class="mb-0">مستخدمين نشطين</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3 mb-3">
                    <div class="enhanced-card text-center" data-aos="fade-up" data-aos-delay="200">
                        <div class="card-body">
                            <i class="fas fa-clock display-4 text-warning mb-3"></i>
                            <h3 class="text-warning">24.7</h3>
                            <p class="mb-0">متوسط أيام الاستخدام</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3 mb-3">
                    <div class="enhanced-card text-center" data-aos="fade-up" data-aos-delay="300">
                        <div class="card-body">
                            <i class="fas fa-star display-4 text-info mb-3"></i>
                            <h3 class="text-info">4.8/5</h3>
                            <p class="mb-0">تقييم الخدمة</p>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="row">
                <div class="col-md-6 mb-4">
                    <div class="enhanced-card" data-aos="fade-right">
                        <div class="card-header">
                            <div class="d-flex justify-content-between align-items-center">
                                <h5><i class="fas fa-chart-line me-2"></i>الاستخدام الشهري</h5>
                                <div class="btn-group" role="group">
                                    <button class="btn btn-sm btn-outline-light">شهر</button>
                                    <button class="btn btn-sm btn-outline-light active">3 شهور</button>
                                    <button class="btn btn-sm btn-outline-light">سنة</button>
                                </div>
                            </div>
                        </div>
                        <div class="card-body">
                            <canvas id="monthlyUsageChart" width="400" height="300"></canvas>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-6 mb-4">
                    <div class="enhanced-card" data-aos="fade-left">
                        <div class="card-header">
                            <h5><i class="fas fa-chart-pie me-2"></i>توزيع أنواع الأكواد</h5>
                        </div>
                        <div class="card-body">
                            <canvas id="codeTypesChart" width="400" height="300"></canvas>
                            <div class="mt-3">
                                <div class="d-flex justify-content-between align-items-center mb-2">
                                    <span><span class="badge bg-primary"></span> عادي</span>
                                    <span>45%</span>
                                </div>
                                <div class="d-flex justify-content-between align-items-center mb-2">
                                    <span><span class="badge bg-success"></span> مميز</span>
                                    <span>30%</span>
                                </div>
                                <div class="d-flex justify-content-between align-items-center mb-2">
                                    <span><span class="badge bg-warning"></span> تجريبي</span>
                                    <span>20%</span>
                                </div>
                                <div class="d-flex justify-content-between align-items-center">
                                    <span><span class="badge bg-info"></span> VIP</span>
                                    <span>5%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- تقرير مفصل محسن -->
            <div class="enhanced-card" data-aos="fade-up">
                <div class="card-header">
                    <div class="d-flex justify-content-between align-items-center flex-wrap">
                        <h5><i class="fas fa-table me-2"></i>تقرير تفصيلي</h5>
                        <div class="d-flex gap-2 flex-wrap">
                            <select class="form-select form-select-sm" style="width: auto;">
                                <option>آخر 7 أيام</option>
                                <option>آخر 30 يوم</option>
                                <option>آخر 90 يوم</option>
                                <option>السنة الحالية</option>
                            </select>
                            <button class="btn btn-sm btn-info-modern">
                                <i class="fas fa-download me-1"></i>تصدير
                            </button>
                        </div>
                    </div>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    <th>الفترة</th>
                                    <th>أكواد جديدة</th>
                                    <th>أكواد مفعلة</th>
                                    <th>اشتراكات جديدة</th>
                                    <th>معدل التحويل</th>
                                    <th>الإيرادات</th>
                                    <th>النمو</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>هذا الأسبوع</td>
                                    <td>45</td>
                                    <td>38</td>
                                    <td>35</td>
                                    <td><span class="badge bg-success">84.4%</span></td>
                                    <td>$1,250</td>
                                    <td><span class="text-success"><i class="fas fa-arrow-up me-1"></i>+12%</span></td>
                                </tr>
                                <tr>
                                    <td>الأسبوع الماضي</td>
                                    <td>52</td>
                                    <td>41</td>
                                    <td>39</td>
                                    <td><span class="badge bg-success">78.8%</span></td>
                                    <td>$1,180</td>
                                    <td><span class="text-success"><i class="fas fa-arrow-up me-1"></i>+8%</span></td>
                                </tr>
                                <tr>
                                    <td>هذا الشهر</td>
                                    <td>203</td>
                                    <td>167</td>
                                    <td>152</td>
                                    <td><span class="badge bg-success">82.2%</span></td>
                                    <td>$5,240</td>
                                    <td><span class="text-success"><i class="fas fa-arrow-up me-1"></i>+25%</span></td>
                                </tr>
                                <tr>
                                    <td>الشهر الماضي</td>
                                    <td>189</td>
                                    <td>145</td>
                                    <td>132</td>
                                    <td><span class="badge bg-warning">76.7%</span></td>
                                    <td>$4,190</td>
                                    <td><span class="text-warning"><i class="fas fa-arrow-down me-1"></i>-2%</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>

        <!-- قسم إدارة المستخدمين -->
        <section id="users-section" style="display:none;">
            <h3 class="section-title" data-aos="fade-down">
                <i class="fas fa-users"></i>إدارة المستخدمين
            </h3>
            
            <div class="enhanced-card" data-aos="fade-up">
                <div class="card-header">
                    <div class="d-flex justify-content-between align-items-center flex-wrap">
                        <h5><i class="fas fa-user-friends me-2"></i>قائمة المستخدمين</h5>
                        <div class="d-flex gap-2 flex-wrap">
                            <button class="btn btn-primary-modern btn-modern" id="add-user">
                                <i class="fas fa-user-plus me-2"></i>مستخدم جديد
                            </button>
                            <button class="btn btn-success-modern btn-modern" id="bulk-user-actions">
                                <i class="fas fa-users-cog me-2"></i>إجراءات متعددة
                            </button>
                            <button class="btn btn-info-modern btn-modern" id="export-users">
                                <i class="fas fa-download me-2"></i>تصدير
                            </button>
                        </div>
                    </div>
                </div>
                <div class="card-body">
                    <!-- فلاتر البحث -->
                    <div class="row mb-4">
                        <div class="col-md-3 mb-3">
                            <label for="search-username" class="form-label">
                                <i class="fas fa-search"></i>البحث عن مستخدم
                            </label>
                            <input type="text" class="form-control" id="search-username" placeholder="اسم المستخدم أو البريد...">
                        </div>
                        <div class="col-md-3 mb-3">
                            <label for="filter-user-status" class="form-label">
                                <i class="fas fa-filter"></i>حالة المستخدم
                            </label>
                            <select class="form-select" id="filter-user-status">
                                <option value="">جميع الحالات</option>
                                <option value="active">نشط</option>
                                <option value="inactive">غير نشط</option>
                                <option value="suspended">معلق</option>
                                <option value="banned">محظور</option>
                            </select>
                        </div>
                        <div class="col-md-3 mb-3">
                            <label for="filter-user-type" class="form-label">
                                <i class="fas fa-user-tag"></i>نوع المستخدم
                            </label>
                            <select class="form-select" id="filter-user-type">
                                <option value="">جميع الأنواع</option>
                                <option value="admin">مدير</option>
                                <option value="premium">مميز</option>
                                <option value="standard">عادي</option>
                                <option value="trial">تجريبي</option>
                            </select>
                        </div>
                        <div class="col-md-3 mb-3">
                            <label for="sort-users" class="form-label">
                                <i class="fas fa-sort"></i>ترتيب حسب
                            </label>
                            <select class="form-select" id="sort-users">
                                <option value="recent">الأحدث</option>
                                <option value="alphabetical">الأبجدي</option>
                                <option value="most_active">الأكثر نشاطاً</option>
                                <option value="subscription_end">انتهاء الاشتراك</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="table-container">
                        <div class="table-responsive">
                            <table class="table table-hover">
                                <thead>
                                    <tr>
                                        <th>
                                            <input type="checkbox" class="form-check-input" id="select-all-users">
                                        </th>
                                        <th><i class="fas fa-user me-1"></i>المستخدم</th>
                                        <th><i class="fas fa-info-circle me-1"></i>الحالة</th>
                                        <th><i class="fas fa-star me-1"></i>النوع</th>
                                        <th><i class="fas fa-calendar me-1"></i>تاريخ التسجيل</th>
                                        <th><i class="fas fa-clock me-1"></i>آخر نشاط</th>
                                        <th><i class="fas fa-key me-1"></i>الأكواد المستخدمة</th>
                                        <th><i class="fas fa-cogs me-1"></i>الإجراءات</th>
                                    </tr>
                                </thead>
                                <tbody id="users-table-body">
                                    <tr>
                                        <td><input type="checkbox" class="form-check-input user-checkbox"></td>
                                        <td>
                                            <div class="d-flex align-items-center">
                                                <div class="avatar-circle me-3 bg-primary">
                                                    <span>أ</span>
                                                </div>
                                                <div>
                                                    <h6 class="mb-0">أحمد محمد</h6>
                                                    <small class="text-muted">ahmed@example.com</small>
                                                </div>
                                            </div>
                                        </td>
                                        <td><span class="badge bg-success">نشط</span></td>
                                        <td><span class="badge bg-warning">مميز</span></td>
                                        <td>2023-08-15</td>
                                        <td>قبل 5 دقائق</td>
                                        <td>3</td>
                                        <td>
                                            <div class="btn-group" role="group">
                                                <button class="btn btn-sm btn-outline-info" title="عرض الملف" onclick="viewUserProfile(1)">
                                                    <i class="fas fa-user"></i>
                                                </button>
                                                <button class="btn btn-sm btn-outline-success" title="إنشاء كود" onclick="createCodeForUser(1)">
                                                    <i class="fas fa-key"></i>
                                                </button>
                                                <button class="btn btn-sm btn-outline-warning" title="تعديل" onclick="editUser(1)">
                                                    <i class="fas fa-edit"></i>
                                                </button>
                                                <button class="btn btn-sm btn-outline-danger" title="تعليق" onclick="suspendUser(1)">
                                                    <i class="fas fa-ban"></i>
                                                </button>
                                            </div>
                                        </td>
                                    </tr>
                                    <!-- المزيد من المستخدمين... -->
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- قسم سجل الأنشطة -->
        <section id="logs-section" style="display:none;">
            <h3 class="section-title" data-aos="fade-down">
                <i class="fas fa-history"></i>سجل الأنشطة والعمليات
            </h3>
            
            <div class="enhanced-card" data-aos="fade-up">
                <div class="card-header">
                    <div class="d-flex justify-content-between align-items-center flex-wrap">
                        <h5><i class="fas fa-list-alt me-2"></i>سجل العمليات</h5>
                        <div class="d-flex gap-2 flex-wrap">
                            <select class="form-select form-select-sm" style="width: auto;">
                                <option>آخر 24 ساعة</option>
                                <option>آخر أسبوع</option>
                                <option>آخر شهر</option>
                            </select>
                            <button class="btn btn-sm btn-warning-modern">
                                <i class="fas fa-broom me-1"></i>تنظيف
                            </button>
                            <button class="btn btn-sm btn-info-modern">
                                <i class="fas fa-download me-1"></i>تصدير
                            </button>
                        </div>
                    </div>
                </div>
                <div class="card-body">
                    <div class="timeline">
                        <div class="timeline-item">
                            <div class="timeline-marker bg-success"></div>
                            <div class="timeline-content">
                                <h6 class="mb-1">تم إنشاء كود جديد</h6>
                                <p class="mb-1">الكود: CODE-X1Y2Z3W4 - المستخدم: أحمد محمد</p>
                                <small class="text-muted">قبل 5 دقائق</small>
                            </div>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-marker bg-primary"></div>
                            <div class="timeline-content">
                                <h6 class="mb-1">تم تفعيل اشتراك</h6>
                                <p class="mb-1">المستخدم: sara@example.com - الكود: CODE-A1B2C3D4</p>
                                <small class="text-muted">قبل 15 دقيقة</small>
                            </div>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-marker bg-warning"></div>
                            <div class="timeline-content">
                                <h6 class="mb-1">تحذير: انتهاء صلاحية كود</h6>
                                <p class="mb-1">الكود: CODE-OLD123 انتهت صلاحيته</p>
                                <small class="text-muted">قبل 30 دقيقة</small>
                            </div>
                        </div>
                        <div class="timeline-item">
                            <div class="timeline-marker bg-danger"></div>
                            <div class="timeline-content">
                                <h6 class="mb-1">تم حظر مستخدم</h6>
                                <p class="mb-1">المستخدم: spammer@example.com - السبب: انتهاك الشروط</p>
                                <small class="text-muted">قبل ساعة</small>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- قسم النسخ الاحتياطي -->
        <section id="backup-section" style="display:none;">
            <h3 class="section-title" data-aos="fade-down">
                <i class="fas fa-database"></i>النسخ الاحتياطي والاستعادة
            </h3>
            
            <div class="row">
                <div class="col-md-6 mb-4">
                    <div class="enhanced-card" data-aos="fade-right">
                        <div class="card-header">
                            <h5><i class="fas fa-save me-2"></i>إنشاء نسخة احتياطية</h5>
                        </div>
                        <div class="card-body">
                            <form id="backup-form">
                                <div class="mb-3">
                                    <label class="form-label">
                                        <i class="fas fa-check-square"></i>البيانات المراد نسخها
                                    </label>
                                    <div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="backup-codes" checked>
                                            <label class="form-check-label" for="backup-codes">
                                                أكواد التفعيل
                                            </label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="backup-users" checked>
                                            <label class="form-check-label" for="backup-users">
                                                بيانات المستخدمين
                                            </label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="backup-subscriptions" checked>
                                            <label class="form-check-label" for="backup-subscriptions">
                                                الاشتراكات
                                            </label>
                                        </div>
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" id="backup-logs">
                                            <label class="form-check-label" for="backup-logs">
                                                سجل الأنشطة
                                            </label>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="backup-format" class="form-label">
                                        <i class="fas fa-file-archive"></i>صيغة الملف
                                    </label>
                                    <select class="form-select" id="backup-format">
                                        <option value="sql">SQL Database</option>
                                        <option value="json">JSON Format</option>
                                        <option value="csv">CSV Format</option>
                                        <option value="xml">XML Format</option>
                                    </select>
                                </div>
                                
                                <div class="mb-3">
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="compress-backup" checked>
                                        <label class="form-check-label" for="compress-backup">
                                            ضغط الملف
                                        </label>
                                    </div>
                                </div>
                                
                                <button type="submit" class="btn btn-primary-modern btn-modern w-100">
                                    <i class="fas fa-download me-2"></i>إنشاء وتحميل النسخة
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
                
                <div class="col-md-6 mb-4">
                    <div class="enhanced-card" data-aos="fade-left">
                        <div class="card-header">
                            <h5><i class="fas fa-upload me-2"></i>استعادة من نسخة احتياطية</h5>
                        </div>
                        <div class="card-body">
                            <div class="alert alert-warning">
                                <i class="fas fa-exclamation-triangle me-2"></i>
                                <strong>تحذير:</strong> ستقوم عملية الاستعادة بالكتابة فوق البيانات الحالية.
                            </div>
                            
                            <form id="restore-form">
                                <div class="mb-3">
                                    <label for="backup-file" class="form-label">
                                        <i class="fas fa-file-upload"></i>اختر ملف النسخة الاحتياطية
                                    </label>
                                    <input type="file" class="form-control" id="backup-file" accept=".sql,.json,.csv,.xml,.zip">
                                </div>
                                
                                <div class="mb-3">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="confirm-restore" required>
                                        <label class="form-check-label" for="confirm-restore">
                                            أؤكد أنني أريد استعادة البيانات
                                        </label>
                                    </div>
                                </div>
                                
                                <button type="submit" class="btn btn-danger-modern btn-modern w-100">
                                    <i class="fas fa-undo me-2"></i>استعادة البيانات
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- النسخ الاحتياطية المحفوظة -->
            <div class="enhanced-card" data-aos="fade-up">
                <div class="card-header">
                    <h5><i class="fas fa-history me-2"></i>النسخ الاحتياطية المحفوظة</h5>
                </div>
                <div class="card-body">
                    <div class="table-responsive">
                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    <th><i class="fas fa-file me-1"></i>اسم الملف</th>
                                    <th><i class="fas fa-calendar me-1"></i>تاريخ الإنشاء</th>
                                    <th><i class="fas fa-hdd me-1"></i>الحجم</th>
                                    <th><i class="fas fa-info-circle me-1"></i>المحتوى</th>
                                    <th><i class="fas fa-cogs me-1"></i>الإجراءات</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>backup_2023_10_21_14_30.sql</td>
                                    <td>2023-10-21 14:30</td>
                                    <td>2.4 MB</td>
                                    <td>جميع البيانات</td>
                                    <td>
                                        <div class="btn-group" role="group">
                                            <button class="btn btn-sm btn-outline-success" title="تحميل">
                                                <i class="fas fa-download"></i>
                                            </button>
                                            <button class="btn btn-sm btn-outline-warning" title="استعادة">
                                                <i class="fas fa-undo"></i>
                                            </button>
                                            <button class="btn btn-sm btn-outline-danger" title="حذف">
                                                <i class="fas fa-trash"></i>
                                            </button>
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>

        <!-- قسم الإعدادات -->
        <section id="settings-section" style="display:none;">
            <h3 class="section-title" data-aos="fade-down">
                <i class="fas fa-cog"></i>الإعدادات العامة
            </h3>
            
            <div class="row">
                <div class="col-lg-6">
                    <div class="enhanced-card mb-4" data-aos="fade-right">
                        <div class="card-header">
                            <h5><i class="fas fa-server me-2"></i>إعدادات النظام</h5>
                        </div>
                        <div class="card-body">
                            <form id="system-settings-form">
                                <div class="mb-3">
                                    <label for="default-duration" class="form-label">
                                        <i class="fas fa-calendar"></i>مدة الاشتراك الافتراضية (أيام)
                                    </label>
                                    <input type="number" class="form-control" id="default-duration" value="30" min="1" max="365">
                                </div>
                                
                                <div class="mb-3">
                                    <label for="default-speed" class="form-label">
                                        <i class="fas fa-tachometer-alt"></i>السرعة الافتراضية
                                    </label>
                                    <select class="form-select" id="default-speed">
                                        <option value="500">سريع جداً (0.5 ثانية)</option>
                                        <option value="1000" selected>سريع (1 ثانية)</option>
                                        <option value="3000">متوسط (3 ثواني)</option>
                                        <option value="5000">بطيء (5 ثواني)</option>
                                    </select>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="max-codes-per-user" class="form-label">
                                        <i class="fas fa-user-lock"></i>الحد الأقصى للأكواد لكل مستخدم
                                    </label>
                                    <input type="number" class="form-control" id="max-codes-per-user" value="5" min="1" max="50">
                                </div>
                                
                                <div class="mb-3">
                                    <h6 class="text-light mb-3">خيارات النظام</h6>
                                    <div class="form-check form-switch mb-2">
                                        <input class="form-check-input" type="checkbox" id="auto-cleanup" checked>
                                        <label class="form-check-label" for="auto-cleanup">
                                            تنظيف تلقائي للأكواد المنتهية الصلاحية
                                        </label>
                                    </div>
                                    <div class="form-check form-switch mb-2">
                                        <input class="form-check-input" type="checkbox" id="email-notifications-system" checked>
                                        <label class="form-check-label" for="email-notifications-system">
                                            إرسال إشعارات بالبريد الإلكتروني
                                        </label>
                                    </div>
                                    <div class="form-check form-switch mb-2">
                                        <input class="form-check-input" type="checkbox" id="maintenance-mode">
                                        <label class="form-check-label" for="maintenance-mode">
                                            وضع الصيانة
                                        </label>
                                    </div>
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="api-access" checked>
                                        <label class="form-check-label" for="api-access">
                                            السماح بالوصول عبر API
                                        </label>
                                    </div>
                                </div>
                                
                                <button type="submit" class="btn btn-primary-modern btn-modern">
                                    <i class="fas fa-save me-2"></i>حفظ الإعدادات
                                </button>
                            </form>
                        </div>
                    </div>
                    
                    <!-- إعدادات الأمان -->
                    <div class="enhanced-card" data-aos="fade-right" data-aos-delay="100">
                        <div class="card-header">
                            <h5><i class="fas fa-shield-alt me-2"></i>إعدادات الأمان</h5>
                        </div>
                        <div class="card-body">
                            <form id="security-settings-form">
                                <div class="mb-3">
                                    <label for="session-timeout" class="form-label">
                                        <i class="fas fa-clock"></i>انتهاء الجلسة (دقيقة)
                                    </label>
                                    <input type="number" class="form-control" id="session-timeout" value="30" min="5" max="480">
                                </div>
                                
                                <div class="mb-3">
                                    <label for="max-login-attempts" class="form-label">
                                        <i class="fas fa-ban"></i>الحد الأقصى لمحاولات تسجيل الدخول
                                    </label>
                                    <input type="number" class="form-control" id="max-login-attempts" value="5" min="3" max="10">
                                </div>
                                
                                <div class="mb-3">
                                    <h6 class="text-light mb-3">إعدادات الحماية</h6>
                                    <div class="form-check form-switch mb-2">
                                        <input class="form-check-input" type="checkbox" id="two-factor-auth" checked>
                                        <label class="form-check-label" for="two-factor-auth">
                                            التحقق بخطوتين
                                        </label>
                                    </div>
                                    <div class="form-check form-switch mb-2">
                                        <input class="form-check-input" type="checkbox" id="ip-whitelist">
                                        <label class="form-check-label" for="ip-whitelist">
                                            قائمة IP المسموحة
                                        </label>
                                    </div>
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="captcha-enabled" checked>
                                        <label class="form-check-label" for="captcha-enabled">
                                            تفعيل CAPTCHA
                                        </label>
                                    </div>
                                </div>
                                
                                <button type="submit" class="btn btn-warning-modern btn-modern">
                                    <i class="fas fa-shield-alt me-2"></i>حفظ إعدادات الأمان
                                </button>
                            </form>
                        </div>
                    </div>
                </div>
                
                <div class="col-lg-6">
                    <!-- إعدادات الإشعارات -->
                    <div class="enhanced-card mb-4" data-aos="fade-left">
                        <div class="card-header">
                            <h5><i class="fas fa-bell me-2"></i>إعدادات الإشعارات</h5>
                        </div>
                        <div class="card-body">
                            <form id="notification-settings-form">
                                <div class="mb-3">
                                    <label for="smtp-server" class="form-label">
                                        <i class="fas fa-server"></i>خادم SMTP
                                    </label>
                                    <input type="text" class="form-control" id="smtp-server" placeholder="smtp.gmail.com">
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="smtp-port" class="form-label">
                                            <i class="fas fa-plug"></i>المنفذ
                                        </label>
                                        <input type="number" class="form-control" id="smtp-port" value="587">
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="smtp-encryption" class="form-label">
                                            <i class="fas fa-lock"></i>التشفير
                                        </label>
                                        <select class="form-select" id="smtp-encryption">
                                            <option value="tls">TLS</option>
                                            <option value="ssl">SSL</option>
                                            <option value="none">بدون</option>
                                        </select>
                                    </div>
                                </div>
                                
                                <div class="mb-3">
                                    <h6 class="text-light mb-3">أنواع الإشعارات</h6>
                                    <div class="form-check form-switch mb-2">
                                        <input class="form-check-input" type="checkbox" id="notify-new-user" checked>
                                        <label class="form-check-label" for="notify-new-user">
                                            مستخدم جديد
                                        </label>
                                    </div>
                                    <div class="form-check form-switch mb-2">
                                        <input class="form-check-input" type="checkbox" id="notify-code-expiry" checked>
                                        <label class="form-check-label" for="notify-code-expiry">
                                            انتهاء صلاحية الكود
                                        </label>
                                    </div>
                                    <div class="form-check form-switch mb-2">
                                        <input class="form-check-input" type="checkbox" id="notify-subscription-end" checked>
                                        <label class="form-check-label" for="notify-subscription-end">
                                            انتهاء الاشتراك
                                        </label>
                                    </div>
                                    <div class="form-check form-switch">
                                        <input class="form-check-input" type="checkbox" id="notify-system-errors" checked>
                                        <label class="form-check-label" for="notify-system-errors">
                                            أخطاء النظام
                                        </label>
                                    </div>
                                </div>
                                
                                <button type="submit" class="btn btn-info-modern btn-modern">
                                    <i class="fas fa-bell me-2"></i>حفظ إعدادات الإشعارات
                                </button>
                            </form>
                        </div>
                    </div>
                    
                    <!-- إدارة قاعدة البيانات -->
                    <div class="enhanced-card" data-aos="fade-left" data-aos-delay="100">
                        <div class="card-header">
                            <h5><i class="fas fa-database me-2"></i>إدارة قاعدة البيانات</h5>
                        </div>
                        <div class="card-body">
                            <div class="row g-3">
                                <div class="col-md-6">
                                    <button class="btn btn-info-modern btn-modern w-100" onclick="optimizeDatabase()">
                                        <i class="fas fa-tools me-2"></i>تحسين قاعدة البيانات
                                    </button>
                                </div>
                                <div class="col-md-6">
                                    <button class="btn btn-warning-modern btn-modern w-100" onclick="cleanupDatabase()">
                                        <i class="fas fa-broom me-2"></i>تنظيف البيانات القديمة
                                    </button>
                                </div>
                                <div class="col-md-6">
                                    <button class="btn btn-success-modern btn-modern w-100" onclick="indexDatabase()">
                                        <i class="fas fa-sync-alt me-2"></i>فهرسة قاعدة البيانات
                                    </button>
                                </div>
                                <div class="col-md-6">
                                    <button class="btn btn-primary-modern btn-modern w-100" onclick="repairDatabase()">
                                        <i class="fas fa-wrench me-2"></i>إصلاح قاعدة البيانات
                                    </button>
                                </div>
                                <div class="col-12">
                                    <button class="btn btn-danger-modern btn-modern w-100" onclick="resetSystem()">
                                        <i class="fas fa-exclamation-triangle me-2"></i>إعادة تعيين شاملة
                                    </button>
                                </div>
                            </div>
                            
                            <!-- معلومات قاعدة البيانات -->
                            <div class="mt-4">
                                <h6 class="text-light mb-3">معلومات قاعدة البيانات</h6>
                                <div class="row text-center">
                                    <div class="col-md-4">
                                        <div class="stat-box p-3 rounded bg-dark">
                                            <h5 class="text-primary">2.4 GB</h5>
                                            <small>حجم قاعدة البيانات</small>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="stat-box p-3 rounded bg-dark">
                                            <h5 class="text-success">15,432</h5>
                                            <small>إجمالي السجلات</small>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="stat-box p-3 rounded bg-dark">
                                            <h5 class="text-warning">98.5%</h5>
                                            <small>كفاءة الأداء</small>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <!-- مودال تفاصيل الكود -->
    <div class="modal fade" id="codeDetailsModal" tabindex="-1" aria-labelledby="codeDetailsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content bg-dark text-light">
                <div class="modal-header">
                    <h5 class="modal-title" id="codeDetailsModalLabel">
                        <i class="fas fa-info-circle me-2"></i>تفاصيل الكود
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="إغلاق"></button>
                </div>
                <div class="modal-body">
                    <div id="codeDetailsContent">
                        <!-- محتوى تفاصيل الكود سيتم تحميله هنا -->
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">إغلاق</button>
                    <button type="button" class="btn btn-primary">حفظ التغييرات</button>
                </div>
            </div>
        </div>
    </div>

    <!-- مودال تأكيد الحذف -->
    <div class="modal fade" id="confirmDeleteModal" tabindex="-1" aria-labelledby="confirmDeleteModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content bg-dark text-light">
                <div class="modal-header">
                    <h5 class="modal-title" id="confirmDeleteModalLabel">
                        <i class="fas fa-exclamation-triangle me-2 text-warning"></i>تأكيد الحذف
                    </h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="إغلاق"></button>
                </div>
                <div class="modal-body">
                    <p>هل أنت متأكد من أنك تريد حذف هذا العنصر؟ لا يمكن التراجع عن هذا الإجراء.</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">إلغاء</button>
                    <button type="button" class="btn btn-danger" id="confirmDeleteBtn">حذف</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
    <script>
        // تهيئة مكتبة الرسوم المتحركة
        AOS.init({
            duration: 800,
            easing: 'ease-in-out-cubic',
            once: false,
            mirror: true
        });

        // إنشاء جسيمات الخلفية
        function createParticles() {
            const particleContainer = document.getElementById('particle-bg');
            const particleCount = 20;

            for (let i = 0; i < particleCount; i++) {
                const particle = document.createElement('div');
                particle.classList.add('particle');
                
                const size = Math.random() * 5 + 2;
                const animationDuration = Math.random() * 20 + 10;
                const animationDelay = Math.random() * 20;
                const leftPosition = Math.random() * 100;

                particle.style.width = `${size}px`;
                particle.style.height = `${size}px`;
                particle.style.left = `${leftPosition}%`;
                particle.style.animationDuration = `${animationDuration}s`;
                particle.style.animationDelay = `${animationDelay}s`;

                particleContainer.appendChild(particle);
            }
        }

        // متغيرات عامة محسنة
        const body = document.body;
        const themeToggleBtn = document.getElementById('theme-toggle-btn');
        const toastContainer = document.getElementById('toast-container');
        const sidebar = document.getElementById('sidebar');
        const mainContent = document.getElementById('main-content');
        const sidebarToggle = document.getElementById('sidebar-toggle');
        const fullscreenBtn = document.getElementById('fullscreen-btn');

        // نظام الإشعارات المتقدم
        function showToast(message, type = 'success', duration = 4000, action = null) {
            const toastEl = document.createElement('div');
            toastEl.className = `toast align-items-center text-white bg-${type} border-0 mb-2 show`;
            toastEl.setAttribute('role', 'alert');
            toastEl.setAttribute('aria-live', 'assertive');
            toastEl.setAttribute('aria-atomic', 'true');
            toastEl.style.minWidth = '350px';

            const icons = {
                success: 'fas fa-check-circle',
                danger: 'fas fa-exclamation-circle',
                warning: 'fas fa-exclamation-triangle',
                info: 'fas fa-info-circle'
            };

            const actionButton = action ? `
                <button type="button" class="btn btn-sm btn-light ms-2" onclick="${action.callback}">
                    ${action.text}
                </button>
            ` : '';

            toastEl.innerHTML = `
                <div class="d-flex">
                    <div class="toast-body d-flex align-items-center">
                        <i class="${icons[type] || icons.info} me-2"></i>
                        ${message}
                        ${actionButton}
                    </div>
                    <button type="button" class="btn-close btn-close-white me-2 m-auto" aria-label="إغلاق"></button>
                </div>`;

            toastContainer.appendChild(toastEl);

            // تأثير صوتي بصري
            toastEl.style.animation = 'slideInRight 0.5s ease-out';

            const closeBtn = toastEl.querySelector('.btn-close');
            closeBtn.addEventListener('click', () => {
                toastEl.style.animation = 'slideOutRight 0.3s ease-in forwards';
                setTimeout(() => toastEl.remove(), 300);
            });

            if (duration > 0) {
                setTimeout(() => {
                    if (toastEl.parentNode) {
                        toastEl.style.animation = 'slideOutRight 0.3s ease-in forwards';
                        setTimeout(() => toastEl.remove(), 300);
                    }
                }, duration);
            }

            return toastEl;
        }

        // نظام وضع ملء الشاشة
        fullscreenBtn.addEventListener('click', () => {
            if (!document.fullscreenElement) {
                document.documentElement.requestFullscreen().then(() => {
                    fullscreenBtn.innerHTML = '<i class="fas fa-compress"></i>';
                    showToast('تم تفعيل وضع ملء الشاشة', 'info');
                });
            } else {
                document.exitFullscreen().then(() => {
                    fullscreenBtn.innerHTML = '<i class="fas fa-expand"></i>';
                    showToast('تم إلغاء وضع ملء الشاشة', 'info');
                });
            }
        });

        // نظام الوضع الداكن المطور
        function toggleTheme() {
            const isDark = body.classList.toggle('dark-mode');
            const icon = themeToggleBtn.querySelector('i');
            
            if (isDark) {
                icon.className = 'fas fa-sun';
                localStorage.setItem('theme', 'dark');
                showToast('تم تفعيل الوضع الداكن', 'info');
            } else {
                icon.className = 'fas fa-moon';
                localStorage.setItem('theme', 'light');
                showToast('تم تفعيل الوضع الفاتح', 'info');
            }
            
            // إعادة تهيئة الرسوم المتحركة
            AOS.refresh();
        }

        themeToggleBtn.addEventListener('click', toggleTheme);

        // استعادة الوضع السابق
        if (localStorage.getItem('theme') === 'dark') {
            body.classList.add('dark-mode');
            themeToggleBtn.querySelector('i').className = 'fas fa-sun';
        }

        // نظام التنقل المطور
        const navLinks = document.querySelectorAll('.sidebar .nav-link');
        const sections = {
            "dashboard-tab": document.getElementById('dashboard-section'),
            "codes-tab": document.getElementById('codes-section'),
            "subscriptions-tab": document.getElementById('subscriptions-section'),
            "create-code-tab": document.getElementById('create-code-section'),
            "analytics-tab": document.getElementById('analytics-section'),
            "users-tab": document.getElementById('users-section'),
            "logs-tab": document.getElementById('logs-section'),
            "backup-tab": document.getElementById('backup-section'),
            "settings-tab": document.getElementById('settings-section'),
        };

        function showSection(targetId) {
            // إخفاء جميع الأقسام
            Object.values(sections).forEach(section => {
                if (section) {
                    section.style.display = 'none';
                    section.classList.remove('loading-animation');
                }
            });

            // إظهار القسم المحدد مع تأثير التحميل
            const targetSection = sections[targetId];
            if (targetSection) {
                targetSection.classList.add('loading-animation');
                setTimeout(() => {
                    targetSection.style.display = 'block';
                    targetSection.classList.remove('loading-animation');
                    // إعادة تهيئة الرسوم المتحركة للقسم الجديد
                    AOS.refresh();
                }, 300);
            }

            // تحديث الروابط النشطة
            navLinks.forEach(link => link.classList.remove('active'));
            const activeLink = document.getElementById(targetId);
            if (activeLink) {
                activeLink.classList.add('active');
            }

            // إغلاق الشريط الجانبي على الأجهزة الصغيرة
            if (window.innerWidth < 992) {
                sidebar.classList.remove('sidebar-show');
            }

            // حفظ آخر قسم تم زيارته
            localStorage.setItem('lastSection', targetId);
            
            // تحديث عنوان الصفحة
            const sectionTitles = {
                "dashboard-tab": "لوحة التحكم الرئيسية",
                "codes-tab": "إدارة أكواد التفعيل",
                "subscriptions-tab": "إدارة الاشتراكات",
                "create-code-tab": "إنشاء كود جديد",
                "analytics-tab": "التحليلات والتقارير",
                "users-tab": "إدارة المستخدمين",
                "logs-tab": "سجل الأنشطة",
                "backup-tab": "النسخ الاحتياطي",
                "settings-tab": "الإعدادات العامة"
            };
            
            document.title = `${sectionTitles[targetId]} - لوحة التحكم المتقدمة`;
        }

        navLinks.forEach(link => {
            link.addEventListener('click', e => {
                e.preventDefault();
                showSection(link.id);
            });
        });

        // استعادة آخر قسم تم زيارته
        const lastSection = localStorage.getItem('lastSection');
        if (lastSection && sections[lastSection]) {
            showSection(lastSection);
        }

        // تبديل الشريط الجانبي
        sidebarToggle.addEventListener('click', () => {
            sidebar.classList.toggle('sidebar-show');
        });

        // إحصائيات محسنة مع تأثيرات متقدمة
        const stats = {
            "active-subs": 125,
            "total-codes": 340,
            "active-codes": 210,
            "total-users": 480,
            "active-accounts": 320,
            "sessions": 1547
        };

        function animateCounters() {
            Object.keys(stats).forEach((id, index) => {
                const element = document.getElementById(id);
                if (!element) return;

                const target = stats[id];
                const duration = 2500;
                const step = Math.max(1, Math.floor(target / (duration / 16)));
                
                setTimeout(() => {
                    let current = 0;
                    const timer = setInterval(() => {
                        current += step;
                        if (current >= target) {
                            clearInterval(timer);
                            element.textContent = target.toLocaleString();
                            element.classList.add('counter-animation');
                        } else {
                            element.textContent = current.toLocaleString();
                        }
                    }, 16);
                }, index * 200);
            });
        }

        // نظام إنشاء الأكواد المطور
        const createCodeForm = document.getElementById('create-code-form');
        const generatedCodeCard = document.getElementById('generated-code-card');
        const generatedCodeInput = document.getElementById('generated-code');
        const copyCodeBtn = document.getElementById('copy-code-btn');
        const shareCodeBtn = document.getElementById('share-code-btn');
        const qrCodeBtn = document.getElementById('qr-code-btn');
        const resetFormBtn = document.getElementById('reset-form');
        const previewCodeBtn = document.getElementById('preview-code');
        const saveTemplateBtn = document.getElementById('save-template');

        function generateRandomCode() {
            const prefix = 'CODE';
            const timestamp = Date.now().toString(36).toUpperCase();
            const random = Math.random().toString(36).substring(2, 8).toUpperCase();
            return `${prefix}-${timestamp}-${random}`;
        }

        // قوالب سريعة للأكواد
        function loadTemplate(type) {
            const templates = {
                trial: { duration: 7, speed: '3000', type: 'trial', maxUses: 1 },
                monthly: { duration: 30, speed: '1000', type: 'standard', maxUses: 1 },
                premium: { duration: 90, speed: '500', type: 'premium', maxUses: 1 },
                annual: { duration: 365, speed: '500', type: 'vip', maxUses: 1 }
            };

            const template = templates[type];
            if (template) {
                document.getElementById('duration').value = template.duration;
                document.getElementById('speed').value = template.speed;
                document.getElementById('code-type').value = template.type;
                document.getElementById('max-uses').value = template.maxUses;
                
                showToast(`تم تحميل قالب ${type} بنجاح`, 'success');
            }
        }

        createCodeForm.addEventListener('submit', e => {
            e.preventDefault();
            
            if (!createCodeForm.checkValidity()) {
                createCodeForm.classList.add('was-validated');
                showToast('يرجى ملء جميع الحقول المطلوبة', 'warning');
                return;
            }
            
            // إظهار مؤشر التحميل
            const submitBtn = e.target.querySelector('button[type="submit"]');
            const originalText = submitBtn.innerHTML;
            submitBtn.innerHTML = '<div class="spinner me-2"></div>جاري الإنشاء...';
            submitBtn.disabled = true;

            // محاكاة عملية الإنشاء
            setTimeout(() => {
                const duration = document.getElementById('duration').value;
                const speed = document.getElementById('speed').value;
                const codeType = document.getElementById('code-type').value;
                const maxUses = document.getElementById('max-uses').value;
                const assignedUser = document.getElementById('assigned-user').value;
                const expiryDate = document.getElementById('expiry-date').value;
                const notes = document.getElementById('code-notes').value;
                
                const newCode = generateRandomCode();
                const currentDate = new Date().toLocaleString('ar-SA');
                
                // عرض الكود المولد
                generatedCodeInput.value = newCode;
                document.getElementById('code-id').textContent = 'CD' + Date.now();
                document.getElementById('code-created').textContent = currentDate;
                
                generatedCodeCard.style.display = 'block';
                generatedCodeCard.scrollIntoView({ behavior: 'smooth' });
                
                showToast(`تم إنشاء كود جديد بنجاح: ${newCode}`, 'success', 5000, {
                    text: 'نسخ',
                    callback: 'copyGeneratedCode()'
                });
                
                // إعادة تعيين الزر
                submitBtn.innerHTML = originalText;
                submitBtn.disabled = false;
                
                // إضافة إلى الجدول (محاكاة)
                addCodeToTable(newCode, duration, speed, codeType, currentDate, assignedUser || 'غير محدد');
                
                // تأثير نجاح
                createCodeForm.classList.add('success-flash');
                setTimeout(() => createCodeForm.classList.remove('success-flash'), 500);
                
            }, 2000);
        });

        function addCodeToTable(code, duration, speed, type, date, user) {
            const tableBody = document.getElementById('codes-table-body');
            if (!tableBody) return;

            const row = document.createElement('tr');
            const speedText = speed === '500' ? 'سريع جداً' : speed === '1000' ? 'سريع' : speed === '3000' ? 'متوسط' : 'بطيء';
            const typeText = type === 'vip' ? 'VIP' : type === 'premium' ? 'مميز' : type === 'trial' ? 'تجريبي' : 'عادي';
            
            row.innerHTML = `
                <td><input type="checkbox" class="form-check-input code-checkbox"></td>
                <td>${tableBody.children.length + 1}</td>
                <td><code class="user-select-all">${code}</code></td>
                <td><span class="badge bg-warning text-dark">غير مفعل</span></td>
                <td>${duration} يوم</td>
                <td><span class="badge bg-info">${speedText}</span></td>
                <td>${date}</td>
                <td>${user}</td>
                <td>
                    <div class="btn-group" role="group">
                        <button class="btn btn-sm btn-outline-success" title="تفعيل" onclick="activateCode('${code}')">
                            <i class="fas fa-play"></i>
                        </button>
                        <button class="btn btn-sm btn-outline-warning" title="تعديل" onclick="editCode('${code}')">
                            <i class="fas fa-edit"></i>
                        </button>
                        <button class="btn btn-sm btn-outline-danger" title="حذف" onclick="deleteCode('${code}')">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                </td>
            `;
            
            tableBody.insertBefore(row, tableBody.firstChild);
            
            // تأثير إدراج جديد
            row.style.animation = 'fadeInUp 0.5s ease-out';
        }

        // نسخ الكود المولد
        function copyGeneratedCode() {
            copyCodeBtn.click();
        }

        // نسخ الكود
        copyCodeBtn.addEventListener('click', async () => {
            try {
                await navigator.clipboard.writeText(generatedCodeInput.value);
                showToast('تم نسخ الكود إلى الحافظة', 'success');
                
                // تأثير بصري
                copyCodeBtn.innerHTML = '<i class="fas fa-check me-2"></i>تم النسخ';
                copyCodeBtn.classList.add('btn-success');
                setTimeout(() => {
                    copyCodeBtn.innerHTML = '<i class="fas fa-copy me-2"></i>نسخ';
                    copyCodeBtn.classList.remove('btn-success');
                }, 2000);
            } catch (err) {
                showToast('فشل في نسخ الكود', 'danger');
            }
        });

        // مشاركة الكود
        shareCodeBtn.addEventListener('click', async () => {
            const codeData = {
                title: 'كود تفعيل جديد',
                text: `كود التفعيل الخاص بك: ${generatedCodeInput.value}`,
                url: window.location.href
            };

            if (navigator.share) {
                try {
                    await navigator.share(codeData);
                    showToast('تم مشاركة الكود بنجاح', 'success');
                } catch (err) {
                    console.log('تم إلغاء المشاركة');
                }
            } else {
                // نسخ بديل للمتصفحات التي لا تدعم المشاركة
                await navigator.clipboard.writeText(codeData.text);
                showToast('تم نسخ بيانات المشاركة', 'info');
            }
        });

        // إنشاء QR Code
        qrCodeBtn.addEventListener('click', () => {
            const qrContainer = document.getElementById('qr-code-container');
            const canvas = document.getElementById('qr-code-canvas');
            
            if (qrContainer.style.display === 'none') {
                // محاكاة إنشاء QR Code
                const ctx = canvas.getContext('2d');
                canvas.width = 200;
                canvas.height = 200;
                
                // رسم QR Code بسيط (محاكاة)
                ctx.fillStyle = '#000';
                ctx.fillRect(0, 0, 200, 200);
                ctx.fillStyle = '#fff';
                ctx.font = '12px Arial';
                ctx.textAlign = 'center';
                ctx.fillText('QR Code', 100, 100);
                ctx.fillText(generatedCodeInput.value, 100, 120);
                
                qrContainer.style.display = 'block';
                qrCodeBtn.innerHTML = '<i class="fas fa-eye-slash me-2"></i>إخفاء QR';
                showToast('تم إنشاء رمز QR بنجاح', 'success');
            } else {
                qrContainer.style.display = 'none';
                qrCodeBtn.innerHTML = '<i class="fas fa-qrcode me-2"></i>QR Code';
            }
        });

        // إعادة تعيين النموذج
        resetFormBtn.addEventListener('click', () => {
            createCodeForm.reset();
            createCodeForm.classList.remove('was-validated');
            generatedCodeCard.style.display = 'none';
            document.getElementById('qr-code-container').style.display = 'none';
            qrCodeBtn.innerHTML = '<i class="fas fa-qrcode me-2"></i>QR Code';
            showToast('تم إعادة تعيين النموذج', 'info');
        });

        // معاينة الكود
        previewCodeBtn.addEventListener('click', () => {
            const duration = document.getElementById('duration').value || 'غير محدد';
            const speed = document.getElementById('speed').value || 'غير محدد';
            const codeType = document.getElementById('code-type').value || 'عادي';
            
            const speedText = speed === '500' ? 'سريع جداً' : speed === '1000' ? 'سريع' : speed === '3000' ? 'متوسط' : speed === '5000' ? 'بطيء' : 'غير محدد';
            const typeText = codeType === 'vip' ? 'VIP' : codeType === 'premium' ? 'مميز' : codeType === 'trial' ? 'تجريبي' : 'عادي';
            
            showToast(`معاينة الكود: مدة ${duration} يوم، سرعة ${speedText}, نوع ${typeText}`, 'info', 6000);
        });

        // حفظ كقالب
        saveTemplateBtn.addEventListener('click', () => {
            const templateData = {
                duration: document.getElementById('duration').value,
                speed: document.getElementById('speed').value,
                type: document.getElementById('code-type').value,
                maxUses: document.getElementById('max-uses').value,
                serverLocation: document.getElementById('server-location').value,
                priority: document.getElementById('priority-level').value
            };
            
            localStorage.setItem('customCodeTemplate', JSON.stringify(templateData));
            showToast('تم حفظ القالب بنجاح', 'success');
        });

        // وظائف إدارة الأكواد
        function viewCodeDetails(codeId) {
            // محاكاة عرض تفاصيل الكود
            const modalContent = document.getElementById('codeDetailsContent');
            modalContent.innerHTML = `
                <div class="row">
                    <div class="col-md-6">
                        <h6>معلومات أساسية</h6>
                        <p><strong>معرف الكود:</strong> ${codeId}</p>
                        <p><strong>الحالة:</strong> <span class="badge bg-success">مفعل</span></p>
                        <p><strong>النوع:</strong> مميز</p>
                    </div>
                    <div class="col-md-6">
                        <h6>إحصائيات الاستخدام</h6>
                        <p><strong>مرات الاستخدام:</strong> 1 من 1</p>
                        <p><strong>آخر استخدام:</strong> قبل 5 دقائق</p>
                        <p><strong>الموقع:</strong> السعودية</p>
                    </div>
                </div>
            `;
            
            new bootstrap.Modal(document.getElementById('codeDetailsModal')).show();
        }

        function editCode(codeId) {
            showToast(`جاري تحميل محرر الكود ${codeId}`, 'info');
        }

        function deleteCode(codeId) {
            const modal = new bootstrap.Modal(document.getElementById('confirmDeleteModal'));
            const confirmBtn = document.getElementById('confirmDeleteBtn');
            
            confirmBtn.onclick = () => {
                showToast(`تم حذف الكود ${codeId} بنجاح`, 'success');
                modal.hide();
            };
            
            modal.show();
        }

        function activateCode(codeId) {
            showToast(`تم تفعيل الكود ${codeId} بنجاح`, 'success');
        }

        function renewCode(codeId) {
            showToast(`تم تجديد الكود ${codeId} بنجاح`, 'success');
        }

        // وظائف إدارة الاشتراكات
        function viewSubscriptionDetails(subId) {
            showToast(`عرض تفاصيل الاشتراك ${subId}`, 'info');
        }

        function extendSubscription(subId) {
            showToast(`تم تمديد الاشتراك ${subId} بنجاح`, 'success');
        }

        function suspendSubscription(subId) {
            showToast(`تم تعليق الاشتراك ${subId}`, 'warning');
        }

        function cancelSubscription(subId) {
            showToast(`تم إلغاء الاشتراك ${subId}`, 'danger');
        }

        function renewSubscription(subId) {
            showToast(`تم تجديد الاشتراك ${subId} بنجاح`, 'success');
        }

        function sendReminder(subId) {
            showToast(`تم إرسال تذكير للاشتراك ${subId}`, 'info');
        }

        function createNewCodeForUser(subId) {
            showSection('create-code-tab');
            showToast('تم فتح صفحة إنشاء كود جديد', 'info');
        }

        function reactivateSubscription(subId) {
            showToast(`تم إعادة تفعيل الاشتراك ${subId}`, 'success');
        }

        function viewSuspensionReason(subId) {
            showToast(`عرض سبب تعليق الاشتراك ${subId}`, 'info');
        }

        function permanentCancel(subId) {
            showToast(`تم الإلغاء النهائي للاشتراك ${subId}`, 'danger');
        }

        // وظائف إدارة المستخدمين
        function viewUserProfile(userId) {
            showToast(`عرض ملف المستخدم ${userId}`, 'info');
        }

        function createCodeForUser(userId) {
            showSection('create-code-tab');
            showToast(`إنشاء كود للمستخدم ${userId}`, 'info');
        }

        function editUser(userId) {
            showToast(`تحرير المستخدم ${userId}`, 'warning');
        }

        function suspendUser(userId) {
            showToast(`تم تعليق المستخدم ${userId}`, 'warning');
        }

        // وظائف قاعدة البيانات
        function optimizeDatabase() {
            showToast('جاري تحسين قاعدة البيانات...', 'info');
            setTimeout(() => {
                showToast('تم تحسين قاعدة البيانات بنجاح', 'success');
            }, 2000);
        }

        function cleanupDatabase() {
            showToast('جاري تنظيف البيانات القديمة...', 'warning');
            setTimeout(() => {
                showToast('تم تنظيف قاعدة البيانات بنجاح', 'success');
            }, 3000);
        }

        function indexDatabase() {
            showToast('جاري فهرسة قاعدة البيانات...', 'info');
            setTimeout(() => {
                showToast('تم فهرسة قاعدة البيانات بنجاح', 'success');
            }, 2500);
        }

        function repairDatabase() {
            showToast('جاري إصلاح قاعدة البيانات...', 'warning');
            setTimeout(() => {
                showToast('تم إصلاح قاعدة البيانات بنجاح', 'success');
            }, 4000);
        }

        function resetSystem() {
            const modal = new bootstrap.Modal(document.getElementById('confirmDeleteModal'));
            const confirmBtn = document.getElementById('confirmDeleteBtn');
            
            confirmBtn.onclick = () => {
                showToast('تم إعادة تعيين النظام بنجاح', 'danger');
                modal.hide();
            };
            
            modal.show();
        }

        function exportData() {
            showToast('جاري تصدير البيانات...', 'info');
            setTimeout(() => {
                showToast('تم تصدير البيانات بنجاح', 'success');
            }, 1500);
        }

        // البحث والفلترة المتقدمة
        const searchInputs = document.querySelectorAll('[id^="search-"]');
        const filterSelects = document.querySelectorAll('[id^="filter-"]');

        searchInputs.forEach(input => {
            input.addEventListener('input', debounce((e) => {
                const value = e.target.value.toLowerCase();
                // تطبيق البحث
                console.log('البحث عن:', value);
                showToast(`البحث عن: ${value}`, 'info', 2000);
            }, 500));
        });

        filterSelects.forEach(select => {
            select.addEventListener('change', (e) => {
                const value = e.target.value;
                console.log('فلتر:', value);
                showToast(`تم تطبيق الفلتر: ${value}`, 'info', 2000);
            });
        });

        // دالة التأخير للبحث
        function debounce(func, wait) {
            let timeout;
            return function executedFunction(...args) {
                const later = () => {
                    clearTimeout(timeout);
                    func(...args);
                };
                clearTimeout(timeout);
                timeout = setTimeout(later, wait);
            };
        }

        // أزرار التحديث
        const refreshButtons = document.querySelectorAll('[id^="refresh-"]');
        refreshButtons.forEach(btn => {
            btn.addEventListener('click', () => {
                const icon = btn.querySelector('i');
                const originalClass = icon.className;
                icon.className = 'fas fa-spinner fa-spin';
                
                setTimeout(() => {
                    icon.className = originalClass;
                    showToast('تم تحديث البيانات', 'success');
                }, 1500);
            });
        });

        // تحديد الكل
        const selectAllCheckboxes = document.querySelectorAll('[id^="select-all-"]');
        selectAllCheckboxes.forEach(checkbox => {
            checkbox.addEventListener('change', (e) => {
                const isChecked = e.target.checked;
                const targetClass = e.target.id.replace('select-all-', '') + '-checkbox';
                const targetCheckboxes = document.querySelectorAll(`.${targetClass}`);
                
                targetCheckboxes.forEach(cb => {
                    cb.checked = isChecked;
                });
                
                showToast(`تم ${isChecked ? 'تحديد' : 'إلغاء تحديد'} جميع العناصر`, 'info');
            });
        });

        // إغلاق الشريط الجانبي عند النقر خارجه
        document.addEventListener('click', (e) => {
            if (window.innerWidth < 992 && 
                !sidebar.contains(e.target) && 
                e.target !== sidebarToggle && 
                !sidebarToggle.contains(e.target)) {
                sidebar.classList.remove('sidebar-show');
            }
        });

        // تأثيرات إضافية عند التمرير
        let lastScrollTop = 0;
        window.addEventListener('scroll', () => {
            const navbar = document.querySelector('.navbar');
            const scrollTop = window.pageYOffset || document.documentElement.scrollTop;
            
            if (scrollTop > lastScrollTop) {
                // التمرير لأسفل
                navbar.style.transform = 'translateY(-100%)';
            } else {
                // التمرير لأعلى
                navbar.style.transform = 'translateY(0)';
            }
            
            lastScrollTop = scrollTop <= 0 ? 0 : scrollTop;
            
            // تأثير الخلفية
            if (scrollTop > 50) {
                navbar.style.backgroundColor = 'rgba(102, 126, 234, 0.98)';
                navbar.style.backdropFilter = 'blur(30px)';
            } else {
                navbar.style.backgroundColor = 'rgba(102, 126, 234, 0.95)';
                navbar.style.backdropFilter = 'blur(25px)';
            }
        });

        // حفظ حالة النموذج تلقائياً
        const formInputs = document.querySelectorAll('input, select, textarea');
        formInputs.forEach(input => {
            if (input.type !== 'submit' && input.type !== 'checkbox') {
                input.addEventListener('change', () => {
                    localStorage.setItem(`form_${input.id}`, input.value);
                });

                // استعادة القيم المحفوظة
                const savedValue = localStorage.getItem(`form_${input.id}`);
                if (savedValue && input.type !== 'submit') {
                    input.value = savedValue;
                }
            }
        });

        // إضافة تأثيرات الأزرار المتقدمة
        document.querySelectorAll('.btn-modern').forEach(btn => {
            btn.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-3px) scale(1.02)';
            });
            
            btn.addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(0) scale(1)';
            });
            
            btn.addEventListener('mousedown', function() {
                this.style.transform = 'translateY(0) scale(0.98)';
            });
            
            btn.addEventListener('mouseup', function() {
                this.style.transform = 'translateY(-3px) scale(1.02)';
            });
        });

        // نظام الاختصارات
        document.addEventListener('keydown', (e) => {
            // Ctrl + / لفتح مساعدة الاختصارات
            if (e.ctrlKey && e.key === '/') {
                e.preventDefault();
                showToast('اختصارات لوحة المفاتيح: Ctrl+N (كود جديد), Ctrl+S (حفظ), Ctrl+R (تحديث)', 'info', 8000);
            }
            
            // Ctrl + N لإنشاء كود جديد
            if (e.ctrlKey && e.key === 'n') {
                e.preventDefault();
                showSection('create-code-tab');
            }
            
            // Ctrl + D للوحة التحكم
            if (e.ctrlKey && e.key === 'd') {
                e.preventDefault();
                showSection('dashboard-tab');
            }
            
            // ESC لإغلاق المودال أو الشريط الجانبي
            if (e.key === 'Escape') {
                sidebar.classList.remove('sidebar-show');
            }
        });

        // تحديث الوقت والتاريخ
        function updateDateTime() {
            const now = new Date();
            const dateStr = now.toLocaleDateString('ar-SA');
            const timeStr = now.toLocaleTimeString('ar-SA');
            
            // يمكن إضافة عنصر لعرض الوقت في الشريط العلوي
            console.log(`${dateStr} ${timeStr}`);
        }

        // تحديث كل ثانية
        setInterval(updateDateTime, 1000);

        // تهيئة النظام عند تحميل الصفحة
        window.addEventListener('load', () => {
            // إنشاء الجسيمات
            createParticles();
            
            // تشغيل العدادات
            setTimeout(animateCounters, 1000);
            
            // رسائل ترحيب
            setTimeout(() => {
                showToast('مرحباً بك في لوحة التحكم المتقدمة! 🎉', 'info', 6000);
            }, 2000);
            
            // تحديث إحصائيات الأداء
            setTimeout(() => {
                showToast('تم تحديث إحصائيات الأداء', 'success', 3000);
            }, 5000);
        });

        // إزالة مؤشر التحميل
        window.addEventListener('load', () => {
            document.body.classList.add('loaded');
        });

        // تحسينات الأداء
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('in-view');
                }
            });
        }, { threshold: 0.1 });

        // مراقبة العناصر للرسوم المتحركة
        document.querySelectorAll('.stat-card, .enhanced-card').forEach(el => {
            observer.observe(el);
        });

        // تعريض الوظائف للنافذة العامة
        window.showSection = showSection;
        window.loadTemplate = loadTemplate;
        window.viewCodeDetails = viewCodeDetails;
        window.editCode = editCode;
        window.deleteCode = deleteCode;
        window.activateCode = activateCode;
        window.renewCode = renewCode;
        window.viewSubscriptionDetails = viewSubscriptionDetails;
        window.extendSubscription = extendSubscription;
        window.suspendSubscription = suspendSubscription;
        window.cancelSubscription = cancelSubscription;
        window.renewSubscription = renewSubscription;
        window.sendReminder = sendReminder;
        window.createNewCodeForUser = createNewCodeForUser;
        window.reactivateSubscription = reactivateSubscription;
        window.viewSuspensionReason = viewSuspensionReason;
        window.permanentCancel = permanentCancel;
        window.viewUserProfile = viewUserProfile;
        window.createCodeForUser = createCodeForUser;
        window.editUser = editUser;
        window.suspendUser = suspendUser;
        window.optimizeDatabase = optimizeDatabase;
        window.cleanupDatabase = cleanupDatabase;
        window.indexDatabase = indexDatabase;
        window.repairDatabase = repairDatabase;
        window.resetSystem = resetSystem;
        window.exportData = exportData;
        window.copyGeneratedCode = copyGeneratedCode;

        // إضافة CSS المتحرك
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideInRight {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            
            @keyframes slideOutRight {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
            
            @keyframes fadeInUp {
                from { transform: translateY(30px); opacity: 0; }
                to { transform: translateY(0); opacity: 1; }
            }
            
            .avatar-circle {
                width: 40px;
                height: 40px;
                border-radius: 50%;
                display: flex;
                align-items: center;
                justify-content: center;
                color: white;
                font-weight: bold;
                font-size: 14px;
            }
            
            .timeline {
                position: relative;
                padding-left: 30px;
            }
            
            .timeline::before {
                content: '';
                position: absolute;
                left: 15px;
                top: 0;
                bottom: 0;
                width: 2px;
                background: linear-gradient(180deg, var(--primary-color), var(--secondary-color));
            }
            
            .timeline-item {
                position: relative;
                margin-bottom: 30px;
            }
            
            .timeline-marker {
                position: absolute;
                left: -23px;
                top: 0;
                width: 16px;
                height: 16px;
                border-radius: 50%;
                border: 2px solid white;
            }
            
            .timeline-content {
                background: rgba(255, 255, 255, 0.1);
                padding: 15px;
                border-radius: 10px;
                backdrop-filter: blur(10px);
            }
            
            .stat-box {
                transition: all 0.3s ease;
            }
            
            .stat-box:hover {
                transform: translateY(-5px);
                box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            }
            
            .loaded .loading-animation::before {
                display: none;
            }
            
            .in-view {
                animation: fadeInUp 0.6s ease-out;
            }
        `;
        document.head.appendChild(style);
    </script>
</body>
</html>
